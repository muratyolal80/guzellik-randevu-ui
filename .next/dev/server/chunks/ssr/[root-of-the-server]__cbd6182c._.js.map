{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///D:/JAVA/projeler_2025/guzellik-randevu/guzellik-randevu-ui-main/services/db.ts"],"sourcesContent":["/**\n * Database Service Layer for GuzellikRandevu\n * Connects to self-hosted Supabase instance\n */\n\nimport { supabase, supabaseUrl } from '@/lib/supabase';\nimport type {\n  City, District, SalonType, ServiceCategory, GlobalService,\n  Salon, SalonDetail, Staff, SalonService, SalonServiceDetail,\n  WorkingHours, Appointment, Review, IYSLog\n} from '@/types';\n\n// Helper to check if we have a real connection\nconst isSupabaseConfigured = () => {\n  return supabaseUrl && supabaseUrl.includes('localhost:8000');\n};\n\n// ==============================================\n// MASTER DATA SERVICE (Admin-Managed Global Data)\n// ==============================================\n\nexport const MasterDataService = {\n  /**\n   * Get all cities (81 Turkish provinces)\n   */\n  async getCities(): Promise<City[]> {\n    const { data, error } = await supabase\n      .from('cities')\n      .select('*')\n      .order('name');\n\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Get districts for a specific city\n   */\n  async getDistrictsByCity(cityId: string): Promise<District[]> {\n    const { data, error } = await supabase\n      .from('districts')\n      .select('*')\n      .eq('city_id', cityId)\n      .order('name');\n\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Get all salon types (Kuaför, Berber, SPA, etc.)\n   */\n  async getSalonTypes(): Promise<SalonType[]> {\n    const { data, error } = await supabase\n      .from('salon_types')\n      .select('*')\n      .order('name');\n\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Get all service categories (Saç, Tırnak, Makyaj, etc.)\n   */\n  async getServiceCategories(): Promise<ServiceCategory[]> {\n    const { data, error } = await supabase\n      .from('service_categories')\n      .select('*')\n      .order('name');\n\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Get global services by category\n   */\n  async getGlobalServicesByCategory(categoryId: string): Promise<GlobalService[]> {\n    const { data, error } = await supabase\n      .from('global_services')\n      .select('*')\n      .eq('category_id', categoryId)\n      .order('name');\n\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Get all global services\n   */\n  async getAllGlobalServices(): Promise<GlobalService[]> {\n    const { data, error } = await supabase\n      .from('global_services')\n      .select('*')\n      .order('name');\n\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Get navigation menu data (for header)\n   */\n  async getNavMenuData() {\n    const [salonTypes, categories, allServices] = await Promise.all([\n      this.getSalonTypes(),\n      this.getServiceCategories(),\n      this.getAllGlobalServices(),\n    ]);\n\n    // Group services by category ID\n    const servicesByCatId: Record<string, string[]> = {};\n    allServices.forEach(service => {\n      if (!servicesByCatId[service.category_id]) {\n        servicesByCatId[service.category_id] = [];\n      }\n      servicesByCatId[service.category_id].push(service.name);\n    });\n\n    return { salonTypes, categories, servicesByCatId };\n  },\n};\n\n// ==============================================\n// SALON SERVICE (Business/Tenant Data)\n// ==============================================\n\nexport const SalonDataService = {\n  /**\n   * Get all salons with detailed information (using view)\n   */\n  async getSalons(): Promise<SalonDetail[]> {\n    const { data, error } = await supabase\n      .from('salon_details')\n      .select('*')\n      .order('is_sponsored', { ascending: false })\n      .order('average_rating', { ascending: false });\n\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Get salon by ID with details\n   */\n  async getSalonById(id: string): Promise<SalonDetail | null> {\n    const { data, error } = await supabase\n      .from('salon_details')\n      .select('*')\n      .eq('id', id)\n      .single();\n\n    if (error) throw error;\n    return data;\n  },\n\n  /**\n   * Search salons by filters\n   */\n  async searchSalons(filters: {\n    cityId?: string;\n    districtId?: string;\n    typeId?: string;\n    query?: string;\n  }): Promise<SalonDetail[]> {\n    let query = supabase\n      .from('salon_details')\n      .select('*');\n\n    if (filters.cityId) {\n      const { data: cityData } = await supabase\n        .from('cities')\n        .select('name')\n        .eq('id', filters.cityId)\n        .single();\n\n      if (cityData) {\n        query = query.eq('city_name', cityData.name);\n      }\n    }\n\n    if (filters.districtId) {\n      const { data: districtData } = await supabase\n        .from('districts')\n        .select('name')\n        .eq('id', filters.districtId)\n        .single();\n\n      if (districtData) {\n        query = query.eq('district_name', districtData.name);\n      }\n    }\n\n    if (filters.typeId) {\n      const { data: typeData } = await supabase\n        .from('salon_types')\n        .select('name')\n        .eq('id', filters.typeId)\n        .single();\n\n      if (typeData) {\n        query = query.eq('type_name', typeData.name);\n      }\n    }\n\n    if (filters.query) {\n      query = query.ilike('name', `%${filters.query}%`);\n    }\n\n    query = query\n      .order('is_sponsored', { ascending: false })\n      .order('average_rating', { ascending: false });\n\n    const { data, error } = await query;\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Get salons by location (nearby)\n   */\n  async getSalonsByLocation(lat: number, lng: number, radiusKm: number = 10): Promise<SalonDetail[]> {\n    // Simple bounding box search (for more accurate, use PostGIS)\n    const latDelta = radiusKm / 111; // ~111km per degree latitude\n    const lngDelta = radiusKm / (111 * Math.cos(lat * Math.PI / 180));\n\n    const { data, error } = await supabase\n      .from('salon_details')\n      .select('*')\n      .gte('geo_latitude', lat - latDelta)\n      .lte('geo_latitude', lat + latDelta)\n      .gte('geo_longitude', lng - lngDelta)\n      .lte('geo_longitude', lng + lngDelta)\n      .order('is_sponsored', { ascending: false });\n\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Create a new salon\n   */\n  async createSalon(salon: Omit<Salon, 'id' | 'created_at' | 'updated_at'>): Promise<Salon> {\n    const { data, error } = await supabase\n      .from('salons')\n      .insert(salon)\n      .select()\n      .single();\n\n    if (error) throw error;\n    return data;\n  },\n\n  /**\n   * Update salon\n   */\n  async updateSalon(id: string, updates: Partial<Salon>): Promise<Salon> {\n    const { data, error } = await supabase\n      .from('salons')\n      .update(updates)\n      .eq('id', id)\n      .select()\n      .single();\n\n    if (error) throw error;\n    return data;\n  },\n};\n\n// ==============================================\n// STAFF SERVICE\n// ==============================================\n\nexport const StaffService = {\n  /**\n   * Get all staff for a salon\n   */\n  async getStaffBySalon(salonId: string): Promise<Staff[]> {\n    const { data, error } = await supabase\n      .from('staff')\n      .select('*')\n      .eq('salon_id', salonId)\n      .eq('is_active', true)\n      .order('name');\n\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Get staff by ID\n   */\n  async getStaffById(id: string): Promise<Staff | null> {\n    const { data, error } = await supabase\n      .from('staff')\n      .select('*')\n      .eq('id', id)\n      .single();\n\n    if (error) throw error;\n    return data;\n  },\n\n  /**\n   * Create new staff member\n   */\n  async createStaff(staff: Omit<Staff, 'id' | 'created_at'>): Promise<Staff> {\n    const { data, error } = await supabase\n      .from('staff')\n      .insert(staff)\n      .select()\n      .single();\n\n    if (error) throw error;\n    return data;\n  },\n};\n\n// ==============================================\n// SERVICE SERVICE (Salon Services)\n// ==============================================\n\nexport const ServiceService = {\n  /**\n   * Get services offered by a salon (with details)\n   */\n  async getServicesBySalon(salonId: string): Promise<SalonServiceDetail[]> {\n    const { data, error } = await supabase\n      .from('salon_service_details')\n      .select('*')\n      .eq('salon_id', salonId)\n      .order('category_name')\n      .order('service_name');\n\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Get service by ID\n   */\n  async getServiceById(id: string): Promise<SalonServiceDetail | null> {\n    const { data, error } = await supabase\n      .from('salon_service_details')\n      .select('*')\n      .eq('id', id)\n      .single();\n\n    if (error) throw error;\n    return data;\n  },\n\n  /**\n   * Add service to salon\n   */\n  async addServiceToSalon(service: Omit<SalonService, 'id' | 'created_at'>): Promise<SalonService> {\n    const { data, error } = await supabase\n      .from('salon_services')\n      .insert(service)\n      .select()\n      .single();\n\n    if (error) throw error;\n    return data;\n  },\n\n  /**\n   * Update salon service pricing\n   */\n  async updateSalonService(id: string, updates: Partial<SalonService>): Promise<SalonService> {\n    const { data, error } = await supabase\n      .from('salon_services')\n      .update(updates)\n      .eq('id', id)\n      .select()\n      .single();\n\n    if (error) throw error;\n    return data;\n  },\n};\n\n// ==============================================\n// WORKING HOURS SERVICE\n// ==============================================\n\nexport const WorkingHoursService = {\n  /**\n   * Get working hours for staff member\n   */\n  async getWorkingHoursByStaff(staffId: string): Promise<WorkingHours[]> {\n    const { data, error } = await supabase\n      .from('working_hours')\n      .select('*')\n      .eq('staff_id', staffId)\n      .order('day_of_week');\n\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Set working hours for staff\n   */\n  async setWorkingHours(hours: Omit<WorkingHours, 'id' | 'created_at'>): Promise<WorkingHours> {\n    const { data, error } = await supabase\n      .from('working_hours')\n      .upsert(hours, { onConflict: 'staff_id,day_of_week' })\n      .select()\n      .single();\n\n    if (error) throw error;\n    return data;\n  },\n};\n\n// ==============================================\n// APPOINTMENT SERVICE\n// ==============================================\n\nexport const AppointmentService = {\n  /**\n   * Get appointment by ID\n   */\n  async getAppointmentById(id: string): Promise<Appointment | null> {\n    const { data, error } = await supabase\n      .from('appointments')\n      .select('*')\n      .eq('id', id)\n      .single();\n\n    if (error) throw error;\n    return data;\n  },\n\n  /**\n   * Get appointments for a salon\n   */\n  async getAppointmentsBySalon(salonId: string, startDate?: string, endDate?: string): Promise<Appointment[]> {\n    let query = supabase\n      .from('appointments')\n      .select('*')\n      .eq('salon_id', salonId);\n\n    if (startDate) {\n      query = query.gte('start_time', startDate);\n    }\n    if (endDate) {\n      query = query.lte('start_time', endDate);\n    }\n\n    query = query.order('start_time');\n\n    const { data, error } = await query;\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Get appointments for a staff member\n   */\n  async getAppointmentsByStaff(staffId: string, date: string): Promise<Appointment[]> {\n    const startOfDay = new Date(date);\n    startOfDay.setHours(0, 0, 0, 0);\n\n    const endOfDay = new Date(date);\n    endOfDay.setHours(23, 59, 59, 999);\n\n    const { data, error } = await supabase\n      .from('appointments')\n      .select('*')\n      .eq('staff_id', staffId)\n      .gte('start_time', startOfDay.toISOString())\n      .lte('start_time', endOfDay.toISOString())\n      .order('start_time');\n\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Get appointments by customer phone\n   */\n  async getAppointmentsByPhone(phone: string): Promise<Appointment[]> {\n    const { data, error } = await supabase\n      .from('appointments')\n      .select('*')\n      .eq('customer_phone', phone)\n      .order('start_time', { ascending: false });\n\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Create new appointment\n   */\n  async createAppointment(appointment: Omit<Appointment, 'id' | 'created_at' | 'updated_at'>): Promise<Appointment> {\n    const { data, error } = await supabase\n      .from('appointments')\n      .insert(appointment)\n      .select()\n      .single();\n\n    if (error) throw error;\n    return data;\n  },\n\n  /**\n   * Update appointment status\n   */\n  async updateAppointmentStatus(id: string, status: Appointment['status']): Promise<Appointment> {\n    const { data, error } = await supabase\n      .from('appointments')\n      .update({ status })\n      .eq('id', id)\n      .select()\n      .single();\n\n    if (error) throw error;\n    return data;\n  },\n\n  /**\n   * Cancel appointment\n   */\n  async cancelAppointment(id: string): Promise<Appointment> {\n    return this.updateAppointmentStatus(id, 'CANCELLED');\n  },\n};\n\n// ==============================================\n// REVIEW SERVICE\n// ==============================================\n\nexport const ReviewService = {\n  /**\n   * Get reviews for a salon\n   */\n  async getReviewsBySalon(salonId: string, limit: number = 50): Promise<Review[]> {\n    const { data, error } = await supabase\n      .from('reviews')\n      .select('*')\n      .eq('salon_id', salonId)\n      .order('created_at', { ascending: false })\n      .limit(limit);\n\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Create new review\n   */\n  async createReview(review: Omit<Review, 'id' | 'created_at'>): Promise<Review> {\n    const { data, error } = await supabase\n      .from('reviews')\n      .insert(review)\n      .select()\n      .single();\n\n    if (error) throw error;\n    return data;\n  },\n\n  /**\n   * Get salon rating summary\n   */\n  async getSalonRating(salonId: string): Promise<{ average: number; count: number }> {\n    const { data, error } = await supabase\n      .from('salon_ratings')\n      .select('*')\n      .eq('salon_id', salonId)\n      .single();\n\n    if (error) return { average: 0, count: 0 };\n\n    return {\n      average: data?.average_rating || 0,\n      count: data?.review_count || 0,\n    };\n  },\n};\n\n// ==============================================\n// IYS LOG SERVICE (SMS Compliance)\n// ==============================================\n\nexport const IYSService = {\n  /**\n   * Log SMS send\n   */\n  async logSMS(log: Omit<IYSLog, 'id' | 'created_at'>): Promise<IYSLog> {\n    const { data, error } = await supabase\n      .from('iys_logs')\n      .insert(log)\n      .select()\n      .single();\n\n    if (error) throw error;\n    return data;\n  },\n\n  /**\n   * Get SMS logs by phone\n   */\n  async getLogsByPhone(phone: string, limit: number = 50): Promise<IYSLog[]> {\n    const { data, error } = await supabase\n      .from('iys_logs')\n      .select('*')\n      .eq('phone', phone)\n      .order('created_at', { ascending: false })\n      .limit(limit);\n\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Get all IYS logs (admin)\n   */\n  async getAllLogs(limit: number = 100): Promise<IYSLog[]> {\n    const { data, error } = await supabase\n      .from('iys_logs')\n      .select('*')\n      .order('created_at', { ascending: false })\n      .limit(limit);\n\n    if (error) throw error;\n    return data || [];\n  },\n};\n\n// ==============================================\n// LEGACY COMPATIBILITY (for existing components)\n// ==============================================\n\n// Re-export new services with old names for backward compatibility\nexport const MasterService = MasterDataService;\n\n// Export all services\nexport default {\n  MasterDataService,\n  MasterService,\n  SalonDataService,\n  StaffService,\n  ServiceService,\n  WorkingHoursService,\n  AppointmentService,\n  ReviewService,\n  IYSService,\n};\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 409, "column": 0}, "map": {"version":3,"sources":["file:///D:/JAVA/projeler_2025/guzellik-randevu/guzellik-randevu-ui-main/components/Layout.tsx"],"sourcesContent":["\nimport React, { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport { useAuth } from '@/context/AuthContext';\nimport { MasterService } from '@/services/db';\nimport { SalonType, ServiceCategory } from '@/types';\n\nexport const Layout: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const pathname = usePathname();\n  const { user, signOut, isAdmin } = useAuth();\n  const isBooking = pathname.includes('/booking');\n\n  // Dynamic Menu State\n  const [salonTypes, setSalonTypes] = useState<SalonType[]>([]);\n  const [categories, setCategories] = useState<ServiceCategory[]>([]);\n  const [servicesByCat, setServicesByCat] = useState<Record<string, string[]>>({});\n\n  useEffect(() => {\n    const fetchMenuData = async () => {\n        const { salonTypes, categories, servicesByCatId } = await MasterService.getNavMenuData();\n        setSalonTypes(salonTypes);\n        setCategories(categories);\n        setServicesByCat(servicesByCatId);\n    };\n    fetchMenuData();\n  }, []);\n\n  return (\n    <div className=\"flex flex-col min-h-screen bg-background\">\n      <header className=\"sticky top-0 z-50 flex items-center justify-between whitespace-nowrap border-b border-border bg-surface/90 backdrop-blur-md px-4 md:px-6 py-4 shadow-sm\">\n        <div className=\"flex items-center gap-4 shrink-0\">\n          <Link href=\"/\" className=\"flex items-center gap-2 group\">\n            <div className=\"size-10 flex items-center justify-center bg-primary rounded-full text-white shadow-lg shadow-primary/20 group-hover:scale-110 transition-transform\">\n              <span className=\"font-display font-bold text-xl\">G</span>\n            </div>\n            <h2 className=\"text-text-main text-2xl font-display font-bold leading-tight tracking-[-0.015em] hidden sm:block\">\n              Güzellik <span className=\"text-primary\">Randevu</span>\n            </h2>\n          </Link>\n        </div>\n        \n        {/* Central Navigation with Dynamic Dropdowns */}\n        <nav className=\"hidden lg:flex items-center gap-1 mx-4\">\n          \n          {/* 1. Salonlar Dropdown (Salon Types) */}\n          <div className=\"relative group px-3 py-3\">\n             <Link \n                href=\"/\"\n                className={`text-sm font-bold transition-colors flex items-center gap-1 group-hover:text-primary ${pathname === '/' ? 'text-primary' : 'text-text-secondary'}`}\n                suppressHydrationWarning\n              >\n                Salonlar\n                <span className=\"material-symbols-outlined text-[16px]\">expand_more</span>\n              </Link>\n              \n              <div className=\"absolute top-full left-0 mt-0 w-64 bg-surface border border-border rounded-xl shadow-soft opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform origin-top-left overflow-hidden z-50 max-h-[80vh] overflow-y-auto\">\n                  <div className=\"py-2\">\n                      <Link href=\"/?type=all\" className=\"block px-4 py-2 text-sm text-text-secondary hover:bg-surface-alt hover:text-primary hover:pl-5 transition-all font-bold\">Tüm Salonlar</Link>\n                      {salonTypes.map((type) => (\n                          <Link \n                            key={type.id} \n                            href={`/?type=${type.slug}`}\n                            className=\"block px-4 py-2 text-sm text-text-secondary hover:bg-surface-alt hover:text-primary hover:pl-5 transition-all\"\n                          >\n                              {type.name}\n                          </Link>\n                      ))}\n                  </div>\n              </div>\n          </div>\n\n          {/* 2. Service Categories (Dynamic) */}\n          {categories.map((cat, index) => {\n              const services = servicesByCat[cat.id] || [];\n              const hasDropdown = services.length > 0;\n              \n              // Handle dropdown positioning for items on the right side of the screen\n              const isRightAligned = index > 3; \n\n              if (hasDropdown) {\n                  return (\n                    <div key={cat.id} className=\"relative group px-2 py-3\">\n                        <Link \n                            href={`/?search=${encodeURIComponent(cat.name)}`}\n                            className=\"text-sm font-medium text-text-secondary hover:text-primary transition-colors flex items-center gap-0.5\"\n                        >\n                            {cat.name}\n                            <span className=\"material-symbols-outlined text-[16px]\">expand_more</span>\n                        </Link>\n                        <div className={`absolute top-full mt-0 w-64 bg-surface border border-border rounded-xl shadow-soft opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform overflow-hidden z-50 max-h-[80vh] overflow-y-auto custom-scrollbar ${isRightAligned ? 'right-0 origin-top-right' : 'left-0 origin-top-left'}`}>\n                            <div className=\"py-2\">\n                                <Link href={`/?search=${encodeURIComponent(cat.name)}`} className=\"block px-4 py-2 text-sm font-bold text-text-main hover:bg-surface-alt hover:pl-5 transition-all border-b border-gray-100\">\n                                    Tüm {cat.name} Hizmetleri\n                                </Link>\n                                {services.map((serviceName, idx) => (\n                                    <Link \n                                        key={idx} \n                                        href={`/?search=${encodeURIComponent(serviceName)}`}\n                                        className=\"block px-4 py-2 text-sm text-text-secondary hover:bg-surface-alt hover:text-primary hover:pl-5 transition-all\"\n                                    >\n                                        {serviceName}\n                                    </Link>\n                                ))}\n                            </div>\n                        </div>\n                    </div>\n                  );\n              }\n\n              // Simple Link for categories without services\n              return (\n                <Link \n                    key={cat.id} \n                    href={`/?search=${encodeURIComponent(cat.name)}`}\n                    className=\"px-2 py-3 text-sm font-medium text-text-secondary hover:text-primary transition-colors\"\n                >\n                    {cat.name}\n                </Link>\n              );\n          })}\n        </nav>\n        \n        <div className=\"flex flex-1 justify-end gap-3 items-center shrink-0\">\n           {!isBooking && isAdmin && (\n              <Link href=\"/admin\" className=\"hidden xl:flex items-center justify-center px-4 py-2 bg-text-main hover:bg-black text-white text-xs font-bold rounded-full shadow-lg transition-all hover:scale-105 whitespace-nowrap\">\n                Yönetim\n              </Link>\n           )}\n           {!isBooking && user?.role === 'staff' && !isAdmin && (\n              <Link href=\"/booking/1/staff\" className=\"hidden xl:flex items-center justify-center px-4 py-2 bg-primary hover:bg-primary-hover text-white text-xs font-bold rounded-full shadow-lg shadow-primary/20 transition-all hover:scale-105 whitespace-nowrap\">\n                İşletme Ekle\n              </Link>\n           )}\n            \n            {user ? (\n                <div className=\"flex items-center gap-2\">\n                    <span className=\"text-sm font-bold text-text-main hidden xl:block truncate max-w-[100px]\">{user.full_name}</span>\n                    <div className=\"group relative\">\n                        <div \n                          className=\"bg-center bg-no-repeat aspect-square bg-cover rounded-full size-9 border-2 border-border cursor-pointer hover:border-primary transition-colors\" \n                          style={{ backgroundImage: `url(\"${user.avatar_url}\")` }}\n                        ></div>\n                        <div className=\"absolute right-0 top-full mt-2 w-48 bg-surface border border-border rounded-xl shadow-soft opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform origin-top-right z-50\">\n                             <div className=\"p-2\">\n                                 {isAdmin && <Link href=\"/admin\" className=\"block px-4 py-2 text-sm text-text-secondary hover:bg-surface-alt hover:text-text-main rounded-lg font-bold\">Admin Paneli</Link>}\n                                 <Link href=\"/profile\" className=\"block px-4 py-2 text-sm text-text-secondary hover:bg-surface-alt hover:text-text-main rounded-lg\">Profilim</Link>\n                                 <Link href=\"/bookings\" className=\"block px-4 py-2 text-sm text-text-secondary hover:bg-surface-alt hover:text-text-main rounded-lg\">Randevularım</Link>\n                                 <div className=\"h-px bg-border my-1\"></div>\n                                 <button onClick={signOut} className=\"w-full text-left px-4 py-2 text-sm text-red-500 hover:bg-surface-alt hover:text-red-600 rounded-lg\">Çıkış Yap</button>\n                             </div>\n                        </div>\n                    </div>\n                </div>\n            ) : (\n                <div className=\"flex items-center gap-3\">\n                  <Link href=\"/login\" className=\"text-text-secondary hover:text-primary transition-colors text-sm font-medium whitespace-nowrap hidden sm:block\">\n                      Giriş Yap\n                  </Link>\n                  <Link href=\"/login\" className=\"px-5 py-2 bg-primary hover:bg-primary-hover text-white text-sm font-bold rounded-full shadow-lg shadow-primary/20 transition-all hover:scale-105 hidden sm:block whitespace-nowrap\">\n                      Kayıt Ol\n                  </Link>\n                </div>\n            )}\n            \n            <div className=\"lg:hidden text-text-main cursor-pointer p-2 hover:bg-surface-alt rounded-full transition-colors\">\n              <span className=\"material-symbols-outlined\">menu</span>\n            </div>\n        </div>\n        \n      </header>\n\n      <main className=\"flex-1 flex flex-col w-full\">\n        {children}\n      </main>\n\n      <footer className=\"border-t border-border bg-white pt-16 pb-8 mt-auto\">\n        <div className=\"max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8\">\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-12 mb-12\">\n                <div className=\"col-span-1\">\n                    <div className=\"flex items-center gap-2 mb-6\">\n                        <div className=\"size-8 bg-primary rounded-full flex items-center justify-center text-white font-display text-lg font-bold\">G</div>\n                        <span className=\"font-display font-bold text-xl text-text-main\">Güzellik <span className=\"text-primary\">Randevu</span></span>\n                    </div>\n                    <p className=\"text-sm leading-relaxed text-text-secondary mb-6\">\n                        Türkiye'nin en kapsamlı kişisel bakım ve güzellik platformu. Randevunuzu kolayca alın, güzelliğinize güzellik katın.\n                    </p>\n                </div>\n                <div>\n                    <h4 className=\"text-text-main font-bold mb-6\">Hızlı Erişim</h4>\n                    <ul className=\"space-y-3 text-sm text-text-secondary\">\n                        <li><a href=\"#\" className=\"hover:text-primary transition-colors\">Hakkımızda</a></li>\n                        <li><a href=\"#\" className=\"hover:text-primary transition-colors\">İletişim</a></li>\n                        <li><a href=\"#\" className=\"hover:text-primary transition-colors\">Kariyer</a></li>\n                        <li><a href=\"#\" className=\"hover:text-primary transition-colors\">Blog</a></li>\n                    </ul>\n                </div>\n                <div>\n                    <h4 className=\"text-text-main font-bold mb-6\">Kategoriler</h4>\n                    <ul className=\"space-y-3 text-sm text-text-secondary\">\n                        {salonTypes.slice(0, 5).map(t => (\n                            <li key={t.id}><Link href={`/?type=${t.slug}`} className=\"hover:text-primary transition-colors\">{t.name}</Link></li>\n                        ))}\n                    </ul>\n                </div>\n                <div>\n                    <h4 className=\"text-text-main font-bold mb-6\">İşletmeler İçin</h4>\n                    <ul className=\"space-y-3 text-sm text-text-secondary\">\n                        <li><a href=\"#\" className=\"hover:text-primary transition-colors\">İşletme Ekle</a></li>\n                        <li><a href=\"#\" className=\"hover:text-primary transition-colors\">Yönetim Paneli</a></li>\n                        <li><a href=\"#\" className=\"hover:text-primary transition-colors\">Başarı Hikayeleri</a></li>\n                        <li><a href=\"#\" className=\"hover:text-primary transition-colors\">Destek</a></li>\n                    </ul>\n                </div>\n            </div>\n            <div className=\"border-t border-border pt-8 flex flex-col md:flex-row justify-between items-center text-xs text-text-muted\">\n              <p>© 2024 Güzellik Randevu. Tüm hakları saklıdır.</p>\n              <div className=\"flex gap-6 mt-4 md:mt-0\">\n                <a href=\"#\" className=\"hover:text-primary transition-colors\">Gizlilik Politikası</a>\n                <a href=\"#\" className=\"hover:text-primary transition-colors\">Kullanım Şartları</a>\n              </div>\n            </div>\n        </div>\n      </footer>\n    </div>\n  );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1290, "column": 0}, "map": {"version":3,"sources":["file:///D:/JAVA/projeler_2025/guzellik-randevu/guzellik-randevu-ui-main/components/GeminiChat.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { GoogleGenAI } from '@google/genai';\n\ninterface Message {\n  id: string;\n  sender: 'user' | 'bot';\n  text: string;\n}\n\nexport const GeminiChat: React.FC = () => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [messages, setMessages] = useState<Message[]>([\n    {\n      id: '1',\n      sender: 'bot',\n      text: 'Merhaba! Ben Güzellik Randevu asistanıyım. Size en uygun salonu veya uzmanı bulmanızda nasıl yardımcı olabilirim?',\n    },\n  ]);\n  const [input, setInput] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  // Use a wide type because this repo currently reports missing DOM lib typings in some builds.\n  const messagesEndRef = useRef<any>(null);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView?.({ behavior: 'smooth' });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages, isOpen]);\n\n  const handleSend = async () => {\n    if (!input.trim()) return;\n\n    const userMsg: Message = { id: Date.now().toString(), sender: 'user', text: input };\n    setMessages((prev) => [...prev, userMsg]);\n    setInput('');\n    setLoading(true);\n\n    try {\n      // Next.js: prefer server-side proxying; if client-side is kept, key must be public.\n      const apiKey = process.env.NEXT_PUBLIC_GEMINI_API_KEY;\n      if (!apiKey) {\n        throw new Error('Gemini API key not found');\n      }\n\n      const ai = new GoogleGenAI({ apiKey });\n      const response = await ai.models.generateContent({\n        model: 'gemini-3-flash-preview',\n        contents: `You are a helpful, polite, and knowledgeable salon concierge assistant for a Turkish salon booking app called 'Güzellik Randevu'. \n        User asks: \"${input}\". \n        Answer in Turkish. Keep it brief, helpful, and professional. \n        If asked about stylists, recommend based on common salon expertise (Elif for hair, Can for beard).`,\n      });\n\n      const botMsg: Message = {\n        id: (Date.now() + 1).toString(),\n        sender: 'bot',\n        text: response.text || 'Üzgünüm, şu an yanıt veremiyorum.',\n      };\n      setMessages((prev) => [...prev, botMsg]);\n    } catch (error) {\n      console.error('AI Error:', error);\n      const errorMsg: Message = {\n        id: (Date.now() + 1).toString(),\n        sender: 'bot',\n        text: 'Bağlantı hatası oluştu. Lütfen tekrar deneyin.',\n      };\n      setMessages((prev) => [...prev, errorMsg]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <>\n      {/* Floating Button */}\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"fixed bottom-6 right-6 z-50 p-4 bg-primary hover:bg-primary-hover text-white rounded-full shadow-2xl transition-all duration-300 hover:scale-105 flex items-center justify-center\"\n      >\n        {isOpen ? (\n          <span className=\"material-symbols-outlined text-2xl\">close</span>\n        ) : (\n          <span className=\"material-symbols-outlined text-2xl\">smart_toy</span>\n        )}\n      </button>\n\n      {/* Chat Window */}\n      {isOpen && (\n        <div className=\"fixed bottom-24 right-6 z-50 w-80 md:w-96 h-[500px] bg-white border border-border rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-fade-in-up\">\n          <div className=\"bg-primary/10 p-4 border-b border-border flex items-center gap-3\">\n            <div className=\"w-8 h-8 rounded-full bg-primary flex items-center justify-center shadow-sm\">\n              <span className=\"material-symbols-outlined text-white text-sm\">smart_toy</span>\n            </div>\n            <div>\n              <h4 className=\"text-text-main font-bold text-sm\">AI Asistan</h4>\n              <p className=\"text-text-secondary text-xs\">Size yardımcı olmak için buradayım</p>\n            </div>\n          </div>\n\n          <div className=\"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50\">\n            {messages.map((msg) => (\n              <div key={msg.id} className={`flex ${msg.sender === 'user' ? 'justify-end' : 'justify-start'}`}>\n                <div\n                  className={`max-w-[80%] p-3 rounded-2xl text-sm shadow-sm ${\n                    msg.sender === 'user'\n                      ? 'bg-primary text-white rounded-br-none font-medium'\n                      : 'bg-white text-text-main rounded-bl-none border border-border'\n                  }`}\n                >\n                  {msg.text}\n                </div>\n              </div>\n            ))}\n            {loading && (\n              <div className=\"flex justify-start\">\n                <div className=\"bg-white p-3 rounded-2xl rounded-bl-none border border-border flex gap-1 shadow-sm\">\n                  <span className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\"></span>\n                  <span className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-100\"></span>\n                  <span className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-200\"></span>\n                </div>\n              </div>\n            )}\n            <div ref={messagesEndRef} />\n          </div>\n\n          <div className=\"p-3 bg-white border-t border-border\">\n            <div className=\"relative\">\n              <input\n                type=\"text\"\n                value={input}\n                onChange={(e) => setInput((e.target as any).value)}\n                onKeyDown={(e) => e.key === 'Enter' && handleSend()}\n                placeholder=\"Bir şeyler sorun...\"\n                className=\"w-full bg-gray-50 border border-gray-200 rounded-full py-3 pl-4 pr-12 text-sm text-text-main focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-colors\"\n              />\n              <button\n                onClick={handleSend}\n                disabled={!input.trim() || loading}\n                className=\"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 bg-primary text-white rounded-full hover:bg-primary-hover transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-sm\"\n              >\n                <span className=\"material-symbols-outlined text-sm\">send</span>\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  );\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1579, "column": 0}, "map": {"version":3,"sources":["file:///D:/JAVA/projeler_2025/guzellik-randevu/guzellik-randevu-ui-main/app/page.tsx"],"sourcesContent":["/// <reference lib=\"dom\" />\n'use client';\n\nimport React, { useState, useEffect, useRef, Suspense } from 'react';\nimport Link from 'next/link';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport dynamic from 'next/dynamic';\nimport { Layout } from '@/components/Layout';\nimport { GeminiChat } from '@/components/GeminiChat';\nimport { SalonDataService, MasterDataService, ServiceService } from '@/services/db';\nimport { SalonDetail, SalonType, GlobalService, City, District } from '@/types';\n\n// Helper: Default coordinates for major cities\nconst getCityCoordinates = (cityName: string): { lat: number; lng: number } | null => {\n    const cityCoords: Record<string, { lat: number; lng: number }> = {\n        \"İstanbul\": { lat: 41.0082, lng: 28.9784 },\n        \"Ankara\": { lat: 39.9208, lng: 32.8541 },\n        \"İzmir\": { lat: 38.4237, lng: 27.1428 },\n        \"Antalya\": { lat: 36.8969, lng: 30.7133 },\n        \"Bursa\": { lat: 40.1885, lng: 29.0610 },\n        \"Adana\": { lat: 37.0000, lng: 35.3213 },\n        \"Gaziantep\": { lat: 37.0662, lng: 37.3833 },\n        \"Konya\": { lat: 37.8667, lng: 32.4833 }\n    };\n    return cityCoords[cityName] || null;\n};\n\n// Dynamically import Map component with no SSR\nconst SalonMap = dynamic(\n    () => import('@/components/Map/SalonMap').then((mod) => mod.SalonMap),\n    {\n        ssr: false,\n        loading: () => (\n            <div className=\"h-full w-full flex items-center justify-center bg-gray-100\">\n                <div className=\"text-center\">\n                    <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\n                    <p className=\"text-text-muted text-sm\">Harita yükleniyor...</p>\n                </div>\n            </div>\n        )\n    }\n);\n\ntype SearchTab = 'service' | 'type' | 'salon';\n\n// --- Helper: Turkish Character Normalization ---\nconst normalize = (text: string | undefined | null) => {\n    if (!text) return '';\n    return text.toLocaleLowerCase('tr').trim();\n};\n\n// --- Helper: Strict Coordinate Validation ---\nconst isValidLatLng = (lat: any, lng: any): boolean => {\n    if (lat === null || lat === undefined || lng === null || lng === undefined) return false;\n    const numLat = Number(lat);\n    const numLng = Number(lng);\n    return !isNaN(numLat) && !isNaN(numLng) && isFinite(numLat) && isFinite(numLng);\n};\n\n\n// --- Service Icon Helper ---\nconst getServiceIcon = (serviceName: string) => {\n    const lower = serviceName.toLowerCase();\n    if (lower.includes('saç') || lower.includes('fön') || lower.includes('kesim') || lower.includes('röfle') || lower.includes('ombre')) return 'content_cut';\n    if (lower.includes('tırnak') || lower.includes('oje') || lower.includes('manikür') || lower.includes('pedikür') || lower.includes('jel')) return 'brush';\n    if (lower.includes('makyaj') || lower.includes('kirpik') || lower.includes('kaş') || lower.includes('lifting')) return 'face';\n    if (lower.includes('masaj') || lower.includes('spa')) return 'spa';\n    if (lower.includes('cilt') || lower.includes('bakım') || lower.includes('peeling')) return 'clean_hands';\n    if (lower.includes('lazer') || lower.includes('epilasyon') || lower.includes('ağda')) return 'flash_on';\n    if (lower.includes('sakal') || lower.includes('tıraş')) return 'face_retouching_natural';\n    if (lower.includes('solaryum')) return 'light_mode';\n    if (lower.includes('diyet') || lower.includes('zayıflama')) return 'monitor_weight';\n    return 'star';\n};\n\nfunction HomePageContent() {\n    const router = useRouter();\n    const [salons, setSalons] = useState<SalonDetail[]>([]);\n    const [salonTypes, setSalonTypes] = useState<SalonType[]>([]);\n    const [globalServices, setGlobalServices] = useState<GlobalService[]>([]);\n    const [cities, setCities] = useState<City[]>([]);\n    const [districts, setDistricts] = useState<District[]>([]);\n    const [salonServicesMap, setSalonServicesMap] = useState<Record<string, string[]>>({});\n    const [loading, setLoading] = useState(true);\n    const searchParams = useSearchParams();\n\n    // Search Parameters from URL\n    const typeParam = searchParams.get('type');\n    const searchParam = searchParams.get('search');\n    const cityParam = searchParams.get('city');\n    const modeParam = searchParams.get('mode'); // 'service', 'type', 'salon'\n\n    // Mode Check\n    const isSearchMode = !!(typeParam || searchParam || cityParam);\n\n    // States\n    const [hoveredSalonId, setHoveredSalonId] = useState<string | null>(null);\n    const [visibleCount, setVisibleCount] = useState(5);\n\n    // Filter States (Initialized from URL)\n    const [localSearch, setLocalSearch] = useState(searchParam || '');\n    const [selectedCity, setSelectedCity] = useState(cityParam || 'Tümü');\n    const [selectedDistrict, setSelectedDistrict] = useState('Tümü');\n\n    // Hero Search Tab State\n    const [activeTab, setActiveTab] = useState<SearchTab>('service');\n\n    // Autocomplete/Combobox States\n    const [suggestions, setSuggestions] = useState<{ type: 'salon' | 'service' | 'category', text: string, id?: string }[]>([]);\n    const [showSuggestions, setShowSuggestions] = useState(false);\n    const searchWrapperRef = useRef<HTMLDivElement>(null);\n\n    // Data Loading\n    useEffect(() => {\n        const fetchData = async () => {\n            setLoading(true);\n            const [salonsData, typesData, servicesData, citiesData] = await Promise.all([\n                SalonDataService.getSalons(),\n                MasterDataService.getSalonTypes(),\n                MasterDataService.getAllGlobalServices(),\n                MasterDataService.getCities()\n            ]);\n\n            // Map database fields to display-friendly properties\n            const mappedData = salonsData.map(salon => ({\n                ...salon,\n                city: salon.city_name,\n                district: salon.district_name,\n                rating: salon.average_rating || 0,\n                tags: [salon.type_name], // Use type as a tag for now\n                startPrice: 100, // TODO: Get from salon_services minimum price\n                coordinates: {\n                    lat: salon.geo_latitude || 0,\n                    lng: salon.geo_longitude || 0\n                }\n            }));\n\n            setSalons(mappedData);\n            setSalonTypes(typesData);\n            setGlobalServices(servicesData);\n            setCities(citiesData);\n\n            // Load services for all salons to enable service-based search\n            const servicesMap: Record<string, string[]> = {};\n            await Promise.all(\n                salonsData.map(async (salon) => {\n                    try {\n                        const salonServices = await ServiceService.getServicesBySalon(salon.id);\n                        servicesMap[salon.id] = salonServices.map(s => s.service_name);\n                    } catch (error) {\n                        console.error(`Error loading services for salon ${salon.id}:`, error);\n                        servicesMap[salon.id] = [];\n                    }\n                })\n            );\n            setSalonServicesMap(servicesMap);\n\n            setLoading(false);\n        };\n        fetchData();\n    }, []); // Run once on mount\n\n    // Sync URL params to State when URL changes (e.g. back button)\n    useEffect(() => {\n        if (searchParam !== null) setLocalSearch(searchParam);\n        if (cityParam !== null) setSelectedCity(cityParam);\n        // Note: We don't sync district from URL yet as it's not in the main query params typically, but could be added.\n    }, [searchParam, cityParam]);\n\n    // Load districts when city changes\n    useEffect(() => {\n        const loadDistricts = async () => {\n            if (selectedCity && selectedCity !== 'Tümü') {\n                const selectedCityData = cities.find(c => c.name === selectedCity);\n                if (selectedCityData) {\n                    const districtsData = await MasterDataService.getDistrictsByCity(selectedCityData.id);\n                    setDistricts(districtsData);\n                }\n            } else {\n                setDistricts([]);\n            }\n        };\n        loadDistricts();\n    }, [selectedCity, cities]);\n\n    // District Reset logic\n    const availableDistricts = districts.map(d => d.name);\n    useEffect(() => {\n        // Only reset if the current selected district is not in the new city's list\n        if (selectedCity !== 'Tümü' && selectedDistrict !== 'Tümü' && !availableDistricts.includes(selectedDistrict)) {\n            setSelectedDistrict('Tümü');\n        }\n    }, [selectedCity, availableDistricts, selectedDistrict]);\n\n    // --- Filtering Logic ---\n    const filteredSalons = salons.filter(salon => {\n        // 1. City Filter\n        if (selectedCity !== 'Tümü') {\n            const salonCity = normalize(salon.city_name);\n            const targetCity = normalize(selectedCity);\n            // Strict check for city (prevents \"Istanbul\" matching inside \"Istanbul yolu\")\n            const salonAddress = normalize(salon.address);\n            if (salonCity !== targetCity && !salonAddress.includes(targetCity)) return false;\n        }\n\n        // 2. District Filter\n        if (selectedDistrict !== 'Tümü') {\n            const salonDistrict = normalize(salon.district_name);\n            const targetDistrict = normalize(selectedDistrict);\n            // Use includes for address string fallback\n            const salonAddress = normalize(salon.address);\n            if (salonDistrict !== targetDistrict && !salonAddress.includes(targetDistrict)) return false;\n        }\n\n        // 3. Type/Category Filter (from URL)\n        if (typeParam && typeParam !== 'all') {\n            const typeSlug = normalize(typeParam);\n            const salonTypeSlug = normalize(salon.type_slug);\n            const salonTypeName = normalize(salon.type_name);\n\n            // Check if salon type matches the requested type\n            const isMatch = salonTypeSlug === typeSlug ||\n                salonTypeName.includes(typeSlug) ||\n                (typeSlug === 'kuafor' && salonTypeName.includes('kuaför')) ||\n                (typeSlug === 'sac' && salonTypeName.includes('saç'));\n\n            if (!isMatch) return false;\n        }\n\n        // 4. Search Term Filter (Context Aware)\n        if (localSearch) {\n            const term = normalize(localSearch);\n\n            // Use modeParam to be specific if provided\n            if (modeParam === 'salon') {\n                // Strict Name Search\n                if (!normalize(salon.name).includes(term)) return false;\n            } else if (modeParam === 'type' || modeParam === 'service') {\n                // Type/Category/Service Search - check type_name and actual services\n                const matchesType = normalize(salon.type_name).includes(term);\n                const matchesAddress = normalize(salon.address).includes(term);\n\n                // Check if any of the salon's services match\n                const salonServices = salonServicesMap[salon.id] || [];\n                const matchesService = salonServices.some(serviceName =>\n                    normalize(serviceName).includes(term)\n                );\n\n                if (!matchesType && !matchesAddress && !matchesService) return false;\n            } else {\n                // Generic Fallback (Name OR Type OR Address OR Services)\n                const matchesName = normalize(salon.name).includes(term);\n                const matchesType = normalize(salon.type_name).includes(term);\n                const matchesAddress = normalize(salon.address).includes(term);\n\n                // Check if any of the salon's services match\n                const salonServices = salonServicesMap[salon.id] || [];\n                const matchesService = salonServices.some(serviceName =>\n                    normalize(serviceName).includes(term)\n                );\n\n                if (!matchesName && !matchesType && !matchesAddress && !matchesService) return false;\n            }\n        }\n        return true;\n    });\n\n    const visibleSalons = filteredSalons.slice(0, visibleCount);\n    const handleLoadMore = () => setVisibleCount(prev => prev + 5);\n\n    // Popular Services List - Use real data from database\n    const popularServices = Array.from(new Set(globalServices.map(s => s.name))).sort().slice(0, 30);\n\n    // --- Safe Map Center Calculation ---\n    const defaultCenter = { lat: 41.0082, lng: 28.9784 }; // Istanbul\n\n    // Get city coordinates using helper function\n    const ISTANBUL_KEY = \"İstanbul\";\n    const istanbulCoords = getCityCoordinates(ISTANBUL_KEY) || defaultCenter;\n\n    const targetCityCoords = getCityCoordinates(selectedCity);\n    // If we have filtered salons, try to center on the first one\n    const firstSalon = filteredSalons.length > 0 ? filteredSalons[0] : null;\n    const firstSalonCoords = firstSalon && firstSalon.geo_latitude && firstSalon.geo_longitude\n        ? { lat: firstSalon.geo_latitude, lng: firstSalon.geo_longitude }\n        : null;\n\n    const mapCenterRaw = firstSalonCoords || targetCityCoords || istanbulCoords;\n\n    // Robust conversion to numbers and check validity\n    const finalLat = isValidLatLng(mapCenterRaw?.lat, mapCenterRaw?.lng) ? Number(mapCenterRaw.lat) : defaultCenter.lat;\n    const finalLng = isValidLatLng(mapCenterRaw?.lat, mapCenterRaw?.lng) ? Number(mapCenterRaw.lng) : defaultCenter.lng;\n\n    const safeMapCenter = {\n        lat: finalLat,\n        lng: finalLng\n    };\n\n    // --- Combobox / Autocomplete Logic ---\n    const handleSearchChange = (val: string) => {\n        setLocalSearch(val);\n        if (val.length < 2) {\n            setSuggestions([]);\n            setShowSuggestions(false);\n            return;\n        }\n\n        const term = normalize(val);\n        const newSuggestions: typeof suggestions = [];\n\n        // Filter logic based on Active Tab\n\n        // 1. Salons (Only if tab is Salon or Generic)\n        if (activeTab === 'salon') {\n            salons.forEach(s => {\n                if (normalize(s.name).includes(term)) {\n                    newSuggestions.push({ type: 'salon', text: s.name, id: s.id });\n                }\n            });\n        }\n\n        // 2. Categories (Only if tab is Type or Generic)\n        if (activeTab === 'type') {\n            salonTypes.forEach(t => {\n                if (normalize(t.name).includes(term)) {\n                    newSuggestions.push({ type: 'category', text: t.name, id: t.slug }); // Pass slug for filtering\n                }\n            });\n        }\n\n        // 3. Services (Only if tab is Service or Generic)\n        if (activeTab === 'service') {\n            // Get all unique services from global services\n            const globalServiceNames = globalServices\n                .filter(s => normalize(s.name).includes(term))\n                .map(s => s.name);\n\n            // Get all unique services from actual salon services\n            const allSalonServices = Object.values(salonServicesMap).flat();\n            const salonServiceNames = allSalonServices\n                .filter(s => normalize(s).includes(term));\n\n            // Combine and deduplicate\n            const matchedServices = Array.from(new Set([...globalServiceNames, ...salonServiceNames])).slice(0, 10);\n\n            matchedServices.forEach(s => {\n                newSuggestions.push({ type: 'service', text: s });\n            });\n        }\n\n        setSuggestions(newSuggestions);\n        setShowSuggestions(true);\n    };\n\n    const handleSuggestionSelect = (item: typeof suggestions[0]) => {\n        setLocalSearch(item.text);\n        setShowSuggestions(false);\n\n        // Direct Navigation for Salons\n        if (item.type === 'salon' && item.id) {\n            router.push(`/salon/${item.id}`);\n            return;\n        }\n\n        // Filter Navigation for Categories\n        if (item.type === 'category' && item.id) {\n            // item.id here holds the slug because we passed it in handleSearchChange\n            let query = `/?type=${item.id}`;\n            if (selectedCity !== 'Tümü') query += `&city=${selectedCity}`;\n            router.push(query);\n            return;\n        }\n\n        // Search Navigation for Services\n        let query = `/?search=${encodeURIComponent(item.text)}`;\n        if (selectedCity !== 'Tümü') query += `&city=${selectedCity}`;\n        query += `&mode=service`;\n\n        router.push(query);\n    };\n\n    const executeSearch = () => {\n        let query = `/?search=${encodeURIComponent(localSearch)}`;\n        if (selectedCity && selectedCity !== 'Tümü') {\n            query += `&city=${selectedCity}`;\n        }\n        // Pass the active tab as mode to refine results\n        query += `&mode=${activeTab}`;\n        router.push(query);\n        setShowSuggestions(false);\n    };\n\n    // Close suggestions on click outside\n    useEffect(() => {\n        const handleClickOutside = (event: MouseEvent) => {\n            if (searchWrapperRef.current && event.target instanceof Node && !searchWrapperRef.current.contains(event.target)) {\n                setShowSuggestions(false);\n            }\n        };\n        if (typeof window !== 'undefined') {\n            document.addEventListener('mousedown', handleClickOutside);\n            return () => document.removeEventListener('mousedown', handleClickOutside);\n        }\n    }, []);\n\n\n    // --- VIEW 1: SEARCH & LISTING (PROFESSIONAL SPLIT VIEW) ---\n    // Add viewMode state\n    const [viewMode, setViewMode] = useState<'split' | 'wide'>('split');\n\n    if (isSearchMode) {\n        return (\n            <Layout>\n                {/* Fixed Layout Container: Header is handled by Layout, we handle the rest full height */}\n                <div className=\"flex flex-col lg:flex-row h-[calc(100vh-80px)] overflow-hidden bg-background\">\n\n                    {/* Left Side: Scrollable List */}\n                    <div className={`${viewMode === 'wide' ? 'w-full' : 'w-full lg:w-[500px] xl:w-[550px]'} flex flex-col border-r border-border bg-white shadow-xl z-20 shrink-0 h-full transition-all duration-300`}>\n\n                        {/* Filter Header */}\n                        <div className=\"p-5 border-b border-border bg-white sticky top-0 z-10 shadow-sm\">\n                            <div className=\"relative mb-3\" ref={searchWrapperRef}>\n                                <span className=\"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-primary\">search</span>\n                                <input\n                                    type=\"text\"\n                                    value={localSearch}\n                                    onChange={(e) => handleSearchChange((e.target as HTMLInputElement).value)}\n                                    onFocus={() => localSearch.length >= 2 && setShowSuggestions(true)}\n                                    placeholder=\"Salon, hizmet veya bölge ara...\"\n                                    className=\"w-full bg-gray-50 border border-gray-200 rounded-xl py-3 pl-10 pr-4 text-text-main placeholder-text-muted focus:border-primary focus:ring-1 focus:ring-primary text-sm transition-all\"\n                                    onKeyDown={(e) => e.key === 'Enter' && executeSearch()}\n                                />\n                                {/* Sidebar Suggestions Dropdown */}\n                                {showSuggestions && suggestions.length > 0 && (\n                                    <div className=\"absolute top-full left-0 right-0 mt-1 bg-white border border-border rounded-xl shadow-lg z-50 max-h-60 overflow-y-auto\">\n                                        {suggestions.map((item, idx) => (\n                                            <div\n                                                key={idx}\n                                                onClick={() => handleSuggestionSelect(item)}\n                                                className=\"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-50 last:border-0 flex items-center gap-3\"\n                                            >\n                                                <span className=\"material-symbols-outlined text-gray-400 text-lg\">\n                                                    {item.type === 'salon' ? 'store' : item.type === 'service' ? 'spa' : 'category'}\n                                                </span>\n                                                <span className=\"text-sm text-text-main\">{item.text}</span>\n                                                {item.type === 'salon' && <span className=\"ml-auto text-[10px] bg-gray-100 px-2 py-0.5 rounded text-gray-500\">Salon</span>}\n                                            </div>\n                                        ))}\n                                    </div>\n                                )}\n                            </div>\n                            <div className=\"grid grid-cols-2 gap-2\">\n                                <div className=\"relative\">\n                                    <select\n                                        value={selectedCity}\n                                        onChange={(e) => setSelectedCity((e.target as HTMLSelectElement).value)}\n                                        className=\"w-full bg-white border border-gray-200 rounded-lg py-2.5 pl-3 pr-8 text-text-main text-xs font-medium appearance-none cursor-pointer focus:border-primary focus:ring-1 focus:ring-primary\"\n                                    >\n                                        <option value=\"Tümü\">Tüm Şehirler</option>\n                                        {cities.map(c => <option key={c.id} value={c.name}>{c.name}</option>)}\n                                    </select>\n                                    <span className=\"material-symbols-outlined absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 text-xs pointer-events-none\">expand_more</span>\n                                </div>\n                                <div className=\"relative\">\n                                    <select\n                                        value={selectedDistrict}\n                                        disabled={selectedCity === 'Tümü'}\n                                        onChange={(e) => setSelectedDistrict((e.target as HTMLSelectElement).value)}\n                                        className=\"w-full bg-white border border-gray-200 rounded-lg py-2.5 pl-3 pr-8 text-text-main text-xs font-medium appearance-none cursor-pointer focus:border-primary focus:ring-1 focus:ring-primary disabled:bg-gray-50 disabled:text-gray-400\"\n                                    >\n                                        <option value=\"Tümü\">Tüm İlçeler</option>\n                                        {districts.map(d => <option key={d.id} value={d.name}>{d.name}</option>)}\n                                    </select>\n                                    <span className=\"material-symbols-outlined absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 text-xs pointer-events-none\">expand_more</span>\n                                </div>\n                            </div>\n                            <div className=\"flex justify-between items-center mt-3 pt-3 border-t border-gray-50\">\n                                <span className=\"text-xs font-bold text-text-main\">{filteredSalons.length} işletme bulundu</span>\n\n                                <div className=\"flex items-center gap-3\">\n                                    {/* View Toggle Buttons */}\n                                    <div className=\"flex bg-gray-100 rounded-lg p-1 gap-1\">\n                                        <button\n                                            onClick={() => setViewMode('split')}\n                                            className={`p-1.5 rounded-md transition-all ${viewMode === 'split' ? 'bg-white shadow-sm text-primary' : 'text-gray-400 hover:text-gray-600'}`}\n                                            title=\"Harita Görünümü\"\n                                        >\n                                            <span className=\"material-symbols-outlined text-[18px]\">map</span>\n                                        </button>\n                                        <button\n                                            onClick={() => setViewMode('wide')}\n                                            className={`p-1.5 rounded-md transition-all ${viewMode === 'wide' ? 'bg-white shadow-sm text-primary' : 'text-gray-400 hover:text-gray-600'}`}\n                                            title=\"Geniş Liste\"\n                                        >\n                                            <span className=\"material-symbols-outlined text-[18px]\">grid_view</span>\n                                        </button>\n                                    </div>\n\n                                    <Link href=\"/\" onClick={() => { setLocalSearch(''); setSelectedCity('Tümü'); }} className=\"text-xs text-primary font-bold hover:underline\">Temizle & Çık</Link>\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Salon List */}\n                        <div className=\"flex-1 overflow-y-auto custom-scrollbar p-5 bg-gray-50/50\">\n                            {loading ? (\n                                <div className={`space-y-4 ${viewMode === 'wide' ? 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 space-y-0' : ''}`}>\n                                    {[1, 2, 3, 4, 5, 6, 7, 8].map(i => <div key={i} className={`${viewMode === 'wide' ? 'h-80' : 'h-40'} bg-white animate-pulse rounded-2xl border border-gray-100`}></div>)}\n                                </div>\n                            ) : (\n                                <div className={viewMode === 'wide' ? 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6' : 'space-y-5'}>\n                                    {visibleSalons.map(salon => (\n                                        <Link\n                                            href={`/salon/${salon.id}`}\n                                            key={salon.id}\n                                            onMouseEnter={() => setHoveredSalonId(salon.id)}\n                                            onMouseLeave={() => setHoveredSalonId(null)}\n                                            className={`group bg-white rounded-2xl border p-4 transition-all duration-300 cursor-pointer shadow-sm hover:shadow-lg ${hoveredSalonId === salon.id ? 'border-primary ring-1 ring-primary' : 'border-gray-200 hover:border-primary/30'} ${viewMode === 'wide' ? 'flex flex-col h-full' : 'flex gap-4'}`}\n                                        >\n                                            <div className={`relative shrink-0 rounded-xl overflow-hidden bg-gray-100 ${viewMode === 'wide' ? 'w-full aspect-[4/3] mb-4' : 'w-32 h-32'}`}>\n                                                <img src={salon.image} alt={salon.name} className=\"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110\" />\n                                                {salon.is_sponsored && <div className=\"absolute top-2 left-2 bg-white/90 backdrop-blur-sm text-primary text-[9px] font-black px-2 py-1 rounded-md uppercase tracking-wider shadow-sm\">Öne Çıkan</div>}\n                                            </div>\n\n                                            <div className=\"flex-1 min-w-0 flex flex-col justify-between\">\n                                                <div>\n                                                    <div className=\"flex justify-between items-start gap-2\">\n                                                        <h3 className=\"font-display font-bold text-text-main text-lg leading-tight truncate group-hover:text-primary transition-colors\">{salon.name}</h3>\n                                                        <div className=\"flex items-center gap-1 bg-gray-50 px-1.5 py-0.5 rounded text-xs font-bold text-text-main border border-gray-100 shrink-0\">\n                                                            <span className=\"material-symbols-outlined text-[14px] filled text-yellow-400\">star</span> {salon.rating}\n                                                        </div>\n                                                    </div>\n                                                    <p className=\"text-xs text-text-secondary mt-1 truncate flex items-center gap-1\">\n                                                        {salon.district}, {salon.city}\n                                                    </p>\n\n                                                    <div className=\"flex flex-wrap gap-1.5 mt-3\">\n                                                        {salon.tags && salon.tags.slice(0, 2).map(tag => (\n                                                            <span key={tag} className=\"text-[10px] text-text-secondary bg-gray-100 px-2 py-1 rounded-md font-medium\">{tag}</span>\n                                                        ))}\n                                                        {salon.tags && salon.tags.length > 2 && <span className=\"text-[10px] text-text-muted bg-gray-50 px-2 py-1 rounded-md\">+ {salon.tags.length - 2}</span>}\n                                                    </div>\n                                                </div>\n\n                                                <div className=\"flex justify-between items-end mt-2 pt-2 border-t border-gray-50\">\n                                                    <div className=\"flex flex-col\">\n                                                        <span className=\"text-[10px] text-text-muted font-bold uppercase\">Başlangıç</span>\n                                                        <span className=\"text-primary font-bold text-base\">{salon.startPrice} ₺</span>\n                                                    </div>\n                                                    <span className=\"text-xs font-bold text-text-secondary group-hover:text-primary transition-colors flex items-center gap-1\">\n                                                        İncele <span className=\"material-symbols-outlined text-sm\">arrow_forward</span>\n                                                    </span>\n                                                </div>\n                                            </div>\n                                        </Link>\n                                    ))}\n\n                                    {filteredSalons.length > visibleCount && (\n                                        <button\n                                            onClick={handleLoadMore}\n                                            className={`w-full py-4 text-sm font-bold text-text-main border border-gray-200 rounded-xl hover:bg-gray-50 transition-colors bg-white shadow-sm flex items-center justify-center gap-2 ${viewMode === 'wide' ? 'col-span-full' : ''}`}\n                                        >\n                                            Daha Fazla Göster <span className=\"material-symbols-outlined text-lg\">expand_more</span>\n                                        </button>\n                                    )}\n\n                                    {filteredSalons.length === 0 && (\n                                        <div className={`flex flex-col items-center justify-center py-20 text-text-muted ${viewMode === 'wide' ? 'col-span-full' : ''}`}>\n                                            <div className=\"bg-gray-100 p-4 rounded-full mb-4\">\n                                                <span className=\"material-symbols-outlined text-4xl opacity-50\">store_off</span>\n                                            </div>\n                                            <p className=\"font-bold text-text-main\">Sonuç bulunamadı</p>\n                                            <p className=\"text-sm mt-1\">Arama kriterlerinizi değiştirerek tekrar deneyin.</p>\n                                            <button onClick={() => { setLocalSearch(''); setSelectedCity('Tümü'); setSelectedDistrict('Tümü'); }} className=\"mt-4 text-primary text-sm font-bold hover:underline\">Filtreleri Temizle</button>\n                                        </div>\n                                    )}\n                                </div>\n                            )}\n                        </div>\n                    </div>\n\n                    {/* Right Side: Map (Hidden on mobile initially, visible on desktop) */}\n                    <div className={`${viewMode === 'wide' ? 'hidden' : 'hidden lg:block'} flex-1 relative bg-gray-100 h-full z-0 transition-all duration-300`}>\n                        <SalonMap\n                            center={safeMapCenter}\n                            salons={filteredSalons}\n                            hoveredSalonId={hoveredSalonId}\n                            onSalonHover={setHoveredSalonId}\n                        />\n\n                        {/* Floating Map Controls */}\n                        <div className=\"absolute bottom-8 right-8 flex flex-col gap-2 z-[400]\">\n                            <button className=\"size-10 bg-white rounded-xl shadow-lg flex items-center justify-center text-gray-600 hover:text-primary transition-colors border border-gray-100\" onClick={() => { }} title=\"Konumum\">\n                                <span className=\"material-symbols-outlined\">my_location</span>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n                <GeminiChat />\n            </Layout>\n        );\n    }\n\n    // --- VIEW 2: LANDING PAGE ---\n\n    return (\n        <Layout>\n            {/* Hero Section */}\n            <div className=\"relative bg-gray-900 overflow-visible min-h-[550px] lg:min-h-[650px] flex items-center justify-center z-10\">\n                {/* Background Image with Overlay */}\n                <div className=\"absolute inset-0 z-0\">\n                    <img\n                        alt=\"Luxury Salon Background\"\n                        className=\"w-full h-full object-cover opacity-60\"\n                        src=\"https://images.unsplash.com/photo-1633681926022-2292608933c0?q=80&w=2000&auto=format&fit=crop\"\n                    />\n                    <div className=\"absolute inset-0 bg-gradient-to-b from-black/70 via-black/40 to-black/80\"></div>\n                </div>\n\n                <div className=\"relative z-10 w-full max-w-5xl mx-auto px-4 sm:px-6 flex flex-col items-center text-center mt-10\">\n                    <span className=\"inline-block py-1 px-3 rounded-full bg-white/10 border border-white/20 text-white text-xs font-bold tracking-wider uppercase mb-6 backdrop-blur-md\">\n                        Türkiye'nin #1 Numaralı Platformu\n                    </span>\n                    <h1 className=\"text-4xl sm:text-5xl lg:text-7xl font-display font-black text-white mb-6 leading-tight drop-shadow-2xl\">\n                        Güzelliğin <br /><span className=\"text-transparent bg-clip-text bg-gradient-to-r from-primary via-yellow-200 to-primary\">Yeni Adresi</span>\n                    </h1>\n                    <p className=\"text-lg text-gray-300 mb-10 max-w-2xl font-medium drop-shadow-md leading-relaxed\">\n                        Size en yakın kuaför, berber ve güzellik merkezlerini keşfedin, fiyatları karşılaştırın ve saniyeler içinde randevunuzu oluşturun.\n                    </p>\n\n                    {/* New Tabbed Search Bar Box */}\n                    <div className=\"w-full max-w-4xl bg-white rounded-xl shadow-2xl p-2 mx-auto border border-white/20 backdrop-blur-sm relative z-50 animate-fade-in-up\">\n\n                        {/* Tabs */}\n                        <div className=\"flex border-b border-gray-100 mb-2 px-2\">\n                            <button\n                                onClick={() => { setActiveTab('service'); setLocalSearch(''); setSuggestions([]); }}\n                                className={`px-4 py-3 text-sm font-bold transition-all border-b-2 outline-none ${activeTab === 'service' ? 'text-primary border-primary' : 'text-text-secondary border-transparent hover:text-primary'}`}\n                            >\n                                Hizmet\n                            </button>\n                            <button\n                                onClick={() => { setActiveTab('type'); setLocalSearch(''); setSuggestions([]); }}\n                                className={`px-4 py-3 text-sm font-bold transition-all border-b-2 outline-none ${activeTab === 'type' ? 'text-primary border-primary' : 'text-text-secondary border-transparent hover:text-primary'}`}\n                            >\n                                Salon Türü\n                            </button>\n                            <button\n                                onClick={() => { setActiveTab('salon'); setLocalSearch(''); setSuggestions([]); }}\n                                className={`px-4 py-3 text-sm font-bold transition-all border-b-2 outline-none ${activeTab === 'salon' ? 'text-primary border-primary' : 'text-text-secondary border-transparent hover:text-primary'}`}\n                            >\n                                Salon Adı\n                            </button>\n                        </div>\n\n                        {/* Inputs */}\n                        <div className=\"flex flex-col md:flex-row gap-2 p-2\">\n                            {/* Combobox Search Input */}\n                            <div className=\"flex-grow relative group\" ref={searchWrapperRef}>\n                                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400\">\n                                    <span className=\"material-symbols-outlined\">search</span>\n                                </div>\n                                <input\n                                    type=\"text\"\n                                    className=\"block w-full pl-10 pr-3 py-3 border border-gray-200 rounded-lg leading-5 bg-gray-50 placeholder-gray-500 focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm font-medium transition-shadow\"\n                                    placeholder={\n                                        activeTab === 'service' ? 'Hizmet ara (örn. Saç Kesimi, Manikür)...' :\n                                            activeTab === 'type' ? 'Salon türü ara (örn. Kuaför, Berber)...' :\n                                                'Salon adı ile ara...'\n                                    }\n                                    value={localSearch}\n                                    onChange={(e) => handleSearchChange((e.target as HTMLInputElement).value)}\n                                    onFocus={() => localSearch.length >= 2 && setShowSuggestions(true)}\n                                    onKeyDown={(e) => e.key === 'Enter' && executeSearch()}\n                                />\n\n                                {/* Suggestions Dropdown (Landing Page) */}\n                                {showSuggestions && suggestions.length > 0 && (\n                                    <div className=\"absolute top-full left-0 right-0 mt-2 bg-white border border-border rounded-xl shadow-xl z-[100] max-h-80 overflow-y-auto\">\n                                        <div className=\"p-2 border-b border-gray-50 text-[10px] text-gray-400 font-bold uppercase tracking-wider pl-4\">Önerilenler</div>\n                                        {suggestions.map((item, idx) => (\n                                            <div\n                                                key={idx}\n                                                onClick={() => handleSuggestionSelect(item)}\n                                                className=\"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-50 last:border-0 flex items-center gap-3\"\n                                            >\n                                                <div className=\"size-8 rounded-full bg-gray-100 flex items-center justify-center shrink-0\">\n                                                    <span className=\"material-symbols-outlined text-gray-500 text-sm\">\n                                                        {item.type === 'salon' ? 'store' : item.type === 'service' ? 'spa' : 'category'}\n                                                    </span>\n                                                </div>\n                                                <div className=\"flex flex-col text-left\">\n                                                    <span className=\"text-sm font-bold text-text-main\">{item.text}</span>\n                                                    {item.type === 'salon' && <span className=\"text-[10px] text-gray-500\">Salon</span>}\n                                                    {item.type === 'category' && <span className=\"text-[10px] text-gray-500\">Kategori</span>}\n                                                </div>\n                                                <span className=\"ml-auto material-symbols-outlined text-gray-300 text-lg -rotate-45\">arrow_forward</span>\n                                            </div>\n                                        ))}\n                                    </div>\n                                )}\n                            </div>\n\n                            <div className=\"w-full md:w-1/3 relative\">\n                                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400\">\n                                    <span className=\"material-symbols-outlined\">location_on</span>\n                                </div>\n                                <select\n                                    className=\"block w-full pl-10 pr-8 py-3 border border-gray-200 rounded-lg leading-5 bg-gray-50 text-text-main focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary sm:text-sm appearance-none cursor-pointer font-medium\"\n                                    value={selectedCity}\n                                    onChange={(e) => setSelectedCity((e.target as HTMLSelectElement).value)}\n                                >\n                                    <option value=\"Tümü\">Tüm Şehirler</option>\n                                    {cities.map(city => <option key={city.id} value={city.name}>{city.name}</option>)}\n                                </select>\n                                <div className=\"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none\">\n                                    <span className=\"material-symbols-outlined text-gray-400 text-sm\">expand_more</span>\n                                </div>\n                            </div>\n\n                            <button\n                                onClick={executeSearch}\n                                className=\"w-full md:w-auto bg-primary hover:bg-primary-hover text-white px-8 py-3 rounded-lg font-bold shadow-lg shadow-primary/30 transition-all flex items-center justify-center gap-2 shrink-0\"\n                            >\n                                Ara\n                            </button>\n                        </div>\n\n                        {/* Footer / Tags */}\n                        <div className=\"px-4 py-2 flex items-center justify-start gap-2 text-xs text-text-secondary border-t border-gray-50 mt-1 pt-3\">\n                            <button className=\"flex items-center gap-1 hover:text-primary transition-colors font-medium\" onClick={() => { }}>\n                                <span className=\"material-symbols-outlined text-sm\">my_location</span>\n                                Yakınımda Ara\n                            </button>\n                            <span className=\"mx-2 opacity-30\">|</span>\n                            <span className=\"hidden sm:inline opacity-70\">Popüler: </span>\n                            {salonTypes.slice(0, 3).map(type => (\n                                <Link key={type.id} href={`/?type=${type.slug}`} className=\"hover:text-primary hover:underline font-medium\">{type.name}</Link>\n                            ))}\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            {/* Featured Salons - Compact Cards (MOVED UP) */}\n            <div className=\"bg-white py-20 relative z-0\">\n                <div className=\"max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8\">\n                    <div className=\"flex justify-between items-end mb-10\">\n                        <div>\n                            <h2 className=\"text-3xl font-display font-bold text-text-main mb-2\">Öne Çıkan Salonlar</h2>\n                            <p className=\"text-text-secondary\">Editörlerimizin sizin için seçtiği en iyi mekanlar.</p>\n                        </div>\n                    </div>\n\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8\">\n                        {salons.slice(0, 4).map((salon) => (\n                            <Link href={`/salon/${salon.id}`} key={salon.id} className=\"group bg-white rounded-2xl overflow-hidden border border-gray-100 hover:border-gray-300 hover:shadow-xl transition-all duration-300 flex flex-col h-full\">\n                                <div className=\"relative overflow-hidden aspect-[4/3]\">\n                                    <img alt={salon.name} className=\"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110\" src={salon.image} />\n                                    <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300\"></div>\n                                    {salon.is_sponsored && (\n                                        <div className=\"absolute top-3 left-3 bg-white text-text-main text-[10px] uppercase tracking-wider font-bold px-2 py-1 rounded shadow-sm\">Sponsorlu</div>\n                                    )}\n                                    <div className=\"absolute top-3 right-3 p-2 bg-white/20 backdrop-blur-md rounded-full text-white hover:bg-white hover:text-red-500 transition-colors\">\n                                        <span className=\"material-symbols-outlined text-sm block\">favorite</span>\n                                    </div>\n                                    <div className=\"absolute bottom-3 left-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300 translate-y-2 group-hover:translate-y-0\">\n                                        <span className=\"w-full block bg-white text-text-main text-center py-2 rounded-lg font-bold text-sm shadow-lg\">Randevu Al</span>\n                                    </div>\n                                </div>\n\n                                <div className=\"p-5 flex flex-col justify-between flex-1\">\n                                    <div>\n                                        <div className=\"flex justify-between items-start mb-1\">\n                                            <h3 className=\"text-lg font-display font-bold text-text-main leading-tight group-hover:text-primary transition-colors\">{salon.name}</h3>\n                                            <div className=\"flex items-center bg-green-50 px-1.5 py-0.5 rounded text-green-700 text-xs font-bold shrink-0 ml-2 border border-green-100\">\n                                                {salon.rating || '5.0'}\n                                                <span className=\"material-symbols-outlined text-[10px] ml-0.5 filled\">star</span>\n                                            </div>\n                                        </div>\n                                        <p className=\"text-xs text-text-secondary mb-3 flex items-center truncate\">\n                                            <span className=\"material-symbols-outlined text-sm mr-1 text-gray-400\">location_on</span>\n                                            {salon.district}, {salon.city}\n                                        </p>\n                                        <div className=\"flex gap-1 mb-4 overflow-hidden\">\n                                            {salon.tags && salon.tags.slice(0, 3).map(t => (\n                                                <span key={t} className=\"text-[10px] text-gray-500 bg-gray-100 px-2 py-0.5 rounded-md whitespace-nowrap\">{t}</span>\n                                            ))}\n                                        </div>\n                                    </div>\n\n                                    <div className=\"border-t border-gray-100 pt-3 flex items-center justify-between\">\n                                        <span className=\"text-xs text-text-muted font-medium\">Başlangıç</span>\n                                        <span className=\"text-lg font-bold text-primary\">{salon.startPrice} ₺</span>\n                                    </div>\n                                </div>\n                            </Link>\n                        ))}\n                    </div>\n                </div>\n            </div>\n\n            {/* Popular Categories Section - Grid Alignment (Background changed to gray) */}\n            <div className=\"bg-gray-50 py-20 border-y border-gray-200\">\n                <div className=\"max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8\">\n                    <div className=\"flex justify-between items-end mb-10\">\n                        <div>\n                            <h2 className=\"text-3xl font-display font-bold text-text-main\">Popüler Kategoriler</h2>\n                            <p className=\"text-text-secondary mt-2\">İhtiyacınıza uygun uzmanı kategorilere göre bulun.</p>\n                        </div>\n                        <Link href=\"/?type=all\" className=\"hidden sm:flex items-center text-primary font-bold text-sm hover:underline gap-1\">\n                            Tümünü Gör <span className=\"material-symbols-outlined text-sm\">arrow_forward</span>\n                        </Link>\n                    </div>\n\n                    <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6\">\n                        {salonTypes.slice(0, 8).map((type) => (\n                            <Link href={`/?type=${type.slug}`} key={type.id} className=\"group relative aspect-[4/3] rounded-2xl overflow-hidden cursor-pointer shadow-md hover:shadow-2xl transition-all duration-500 bg-white\">\n                                {/* Background Image */}\n                                <div\n                                    className=\"absolute inset-0 bg-cover bg-center transition-transform duration-700 group-hover:scale-110\"\n                                    style={{ backgroundImage: `url(\"${type.image || 'https://images.unsplash.com/photo-1560066984-138dadb4c035?w=600'}\")` }}\n                                ></div>\n\n                                {/* Gradient Overlay - Better Readability */}\n                                <div className=\"absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent opacity-80 group-hover:opacity-90 transition-opacity duration-300\"></div>\n\n                                {/* Content */}\n                                <div className=\"absolute inset-0 p-6 flex flex-col justify-end items-start z-10\">\n                                    <h3 className=\"text-xl lg:text-2xl font-bold text-white mb-1 transform group-hover:-translate-y-1 transition-transform duration-300\">{type.name}</h3>\n                                    <div className=\"h-0 group-hover:h-auto opacity-0 group-hover:opacity-100 overflow-hidden transition-all duration-300\">\n                                        <span className=\"text-xs font-bold text-primary flex items-center gap-1 uppercase tracking-wide\">\n                                            Keşfet <span className=\"material-symbols-outlined text-sm\">arrow_right_alt</span>\n                                        </span>\n                                    </div>\n                                </div>\n                            </Link>\n                        ))}\n                    </div>\n                </div>\n            </div>\n\n            {/* Popular Services Section - Clean List Layout (MOVED TO BOTTOM, Background White) */}\n            <div className=\"bg-white py-20\">\n                <div className=\"max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8\">\n                    <div className=\"text-center mb-12\">\n                        <span className=\"text-primary font-bold tracking-wider text-xs uppercase mb-2 block\">Hizmetlerimiz</span>\n                        <h2 className=\"text-3xl lg:text-4xl font-display font-bold text-text-main\">\n                            Popüler Hizmetler\n                        </h2>\n                        <div className=\"h-1 w-16 bg-primary mx-auto mt-4 rounded-full\"></div>\n                    </div>\n\n                    {/* The \"Clean List\" Grid */}\n                    <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4\">\n                        {popularServices.map((service, idx) => (\n                            <Link\n                                key={idx}\n                                href={`/?search=${encodeURIComponent(service)}&mode=service`}\n                                className=\"flex items-center gap-3 p-4 bg-white rounded-xl border border-gray-200 hover:border-primary hover:shadow-md transition-all group\"\n                            >\n                                <div className=\"size-10 rounded-lg bg-gray-50 text-gray-400 flex items-center justify-center group-hover:bg-primary group-hover:text-white transition-colors shrink-0\">\n                                    <span className=\"material-symbols-outlined text-xl\">{getServiceIcon(service)}</span>\n                                </div>\n                                <span className=\"text-text-secondary font-semibold text-sm group-hover:text-text-main transition-colors truncate\">{service}</span>\n                            </Link>\n                        ))}\n                    </div>\n\n                    <div className=\"mt-10 text-center\">\n                        <Link href=\"/?type=all\" className=\"inline-flex items-center justify-center px-8 py-3 border border-gray-300 shadow-sm text-sm font-bold rounded-xl text-text-secondary bg-white hover:bg-gray-50 transition-all\">\n                            Tüm Hizmetleri Görüntüle\n                        </Link>\n                    </div>\n                </div>\n            </div>\n\n            <GeminiChat />\n        </Layout>\n    );\n}\n\n// Wrap with Suspense to handle useSearchParams\nexport default function HomePage() {\n    return (\n        <Suspense fallback={\n            <div className=\"min-h-screen flex items-center justify-center bg-background\">\n                <div className=\"text-center\">\n                    <div className=\"animate-spin rounded-full h-16 w-16 border-b-2 border-primary mx-auto mb-4\"></div>\n                    <p className=\"text-text-muted text-lg\">Yükleniyor...</p>\n                </div>\n            </div>\n        }>\n            <HomePageContent />\n        </Suspense>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}