{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///D:/JAVA/projeler_2025/guzellik-randevu/guzellik-randevu-ui-main/services/db.ts"],"sourcesContent":["/**\n * Database Service Layer for GuzellikRandevu\n * Connects to self-hosted Supabase instance\n */\n\nimport { supabase, supabaseUrl } from '@/lib/supabase';\nimport type {\n  City, District, SalonType, ServiceCategory, GlobalService,\n  Salon, SalonDetail, Staff, SalonService, SalonServiceDetail,\n  WorkingHours, Appointment, Review, IYSLog\n} from '@/types';\n\n// Helper to check if we have a real connection\nconst isSupabaseConfigured = () => {\n  return supabaseUrl && supabaseUrl.includes('localhost:8000');\n};\n\n// ==============================================\n// MASTER DATA SERVICE (Admin-Managed Global Data)\n// ==============================================\n\nexport const MasterDataService = {\n  /**\n   * Get all cities (81 Turkish provinces)\n   */\n  async getCities(): Promise<City[]> {\n    const { data, error } = await supabase\n      .from('cities')\n      .select('*')\n      .order('name');\n\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Get districts for a specific city\n   */\n  async getDistrictsByCity(cityId: string): Promise<District[]> {\n    const { data, error } = await supabase\n      .from('districts')\n      .select('*')\n      .eq('city_id', cityId)\n      .order('name');\n\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Get all salon types (Kuaför, Berber, SPA, etc.)\n   */\n  async getSalonTypes(): Promise<SalonType[]> {\n    const { data, error } = await supabase\n      .from('salon_types')\n      .select('*')\n      .order('name');\n\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Get all service categories (Saç, Tırnak, Makyaj, etc.)\n   */\n  async getServiceCategories(): Promise<ServiceCategory[]> {\n    const { data, error } = await supabase\n      .from('service_categories')\n      .select('*')\n      .order('name');\n\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Get global services by category\n   */\n  async getGlobalServicesByCategory(categoryId: string): Promise<GlobalService[]> {\n    const { data, error } = await supabase\n      .from('global_services')\n      .select('*')\n      .eq('category_id', categoryId)\n      .order('name');\n\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Get all global services\n   */\n  async getAllGlobalServices(): Promise<GlobalService[]> {\n    const { data, error } = await supabase\n      .from('global_services')\n      .select('*')\n      .order('name');\n\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Get navigation menu data (for header)\n   */\n  async getNavMenuData() {\n    const [salonTypes, categories, allServices] = await Promise.all([\n      this.getSalonTypes(),\n      this.getServiceCategories(),\n      this.getAllGlobalServices(),\n    ]);\n\n    // Group services by category ID\n    const servicesByCatId: Record<string, string[]> = {};\n    allServices.forEach(service => {\n      if (!servicesByCatId[service.category_id]) {\n        servicesByCatId[service.category_id] = [];\n      }\n      servicesByCatId[service.category_id].push(service.name);\n    });\n\n    return { salonTypes, categories, servicesByCatId };\n  },\n};\n\n// ==============================================\n// SALON SERVICE (Business/Tenant Data)\n// ==============================================\n\nexport const SalonDataService = {\n  /**\n   * Get all salons with detailed information (using view)\n   */\n  async getSalons(): Promise<SalonDetail[]> {\n    const { data, error } = await supabase\n      .from('salon_details')\n      .select('*')\n      .order('is_sponsored', { ascending: false })\n      .order('average_rating', { ascending: false });\n\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Get salon by ID with details\n   */\n  async getSalonById(id: string): Promise<SalonDetail | null> {\n    const { data, error } = await supabase\n      .from('salon_details')\n      .select('*')\n      .eq('id', id)\n      .single();\n\n    if (error) throw error;\n    return data;\n  },\n\n  /**\n   * Search salons by filters\n   */\n  async searchSalons(filters: {\n    cityId?: string;\n    districtId?: string;\n    typeId?: string;\n    query?: string;\n  }): Promise<SalonDetail[]> {\n    let query = supabase\n      .from('salon_details')\n      .select('*');\n\n    if (filters.cityId) {\n      const { data: cityData } = await supabase\n        .from('cities')\n        .select('name')\n        .eq('id', filters.cityId)\n        .single();\n\n      if (cityData) {\n        query = query.eq('city_name', cityData.name);\n      }\n    }\n\n    if (filters.districtId) {\n      const { data: districtData } = await supabase\n        .from('districts')\n        .select('name')\n        .eq('id', filters.districtId)\n        .single();\n\n      if (districtData) {\n        query = query.eq('district_name', districtData.name);\n      }\n    }\n\n    if (filters.typeId) {\n      const { data: typeData } = await supabase\n        .from('salon_types')\n        .select('name')\n        .eq('id', filters.typeId)\n        .single();\n\n      if (typeData) {\n        query = query.eq('type_name', typeData.name);\n      }\n    }\n\n    if (filters.query) {\n      query = query.ilike('name', `%${filters.query}%`);\n    }\n\n    query = query\n      .order('is_sponsored', { ascending: false })\n      .order('average_rating', { ascending: false });\n\n    const { data, error } = await query;\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Get salons by location (nearby)\n   */\n  async getSalonsByLocation(lat: number, lng: number, radiusKm: number = 10): Promise<SalonDetail[]> {\n    // Simple bounding box search (for more accurate, use PostGIS)\n    const latDelta = radiusKm / 111; // ~111km per degree latitude\n    const lngDelta = radiusKm / (111 * Math.cos(lat * Math.PI / 180));\n\n    const { data, error } = await supabase\n      .from('salon_details')\n      .select('*')\n      .gte('geo_latitude', lat - latDelta)\n      .lte('geo_latitude', lat + latDelta)\n      .gte('geo_longitude', lng - lngDelta)\n      .lte('geo_longitude', lng + lngDelta)\n      .order('is_sponsored', { ascending: false });\n\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Create a new salon\n   */\n  async createSalon(salon: Omit<Salon, 'id' | 'created_at' | 'updated_at'>): Promise<Salon> {\n    const { data, error } = await supabase\n      .from('salons')\n      .insert(salon)\n      .select()\n      .single();\n\n    if (error) throw error;\n    return data;\n  },\n\n  /**\n   * Update salon\n   */\n  async updateSalon(id: string, updates: Partial<Salon>): Promise<Salon> {\n    const { data, error } = await supabase\n      .from('salons')\n      .update(updates)\n      .eq('id', id)\n      .select()\n      .single();\n\n    if (error) throw error;\n    return data;\n  },\n};\n\n// ==============================================\n// STAFF SERVICE\n// ==============================================\n\nexport const StaffService = {\n  /**\n   * Get all staff for a salon\n   */\n  async getStaffBySalon(salonId: string): Promise<Staff[]> {\n    const { data, error } = await supabase\n      .from('staff')\n      .select('*')\n      .eq('salon_id', salonId)\n      .eq('is_active', true)\n      .order('name');\n\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Get staff by ID\n   */\n  async getStaffById(id: string): Promise<Staff | null> {\n    const { data, error } = await supabase\n      .from('staff')\n      .select('*')\n      .eq('id', id)\n      .single();\n\n    if (error) throw error;\n    return data;\n  },\n\n  /**\n   * Create new staff member\n   */\n  async createStaff(staff: Omit<Staff, 'id' | 'created_at'>): Promise<Staff> {\n    const { data, error } = await supabase\n      .from('staff')\n      .insert(staff)\n      .select()\n      .single();\n\n    if (error) throw error;\n    return data;\n  },\n};\n\n// ==============================================\n// SERVICE SERVICE (Salon Services)\n// ==============================================\n\nexport const ServiceService = {\n  /**\n   * Get services offered by a salon (with details)\n   */\n  async getServicesBySalon(salonId: string): Promise<SalonServiceDetail[]> {\n    const { data, error } = await supabase\n      .from('salon_service_details')\n      .select('*')\n      .eq('salon_id', salonId)\n      .order('category_name')\n      .order('service_name');\n\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Get service by ID\n   */\n  async getServiceById(id: string): Promise<SalonServiceDetail | null> {\n    const { data, error } = await supabase\n      .from('salon_service_details')\n      .select('*')\n      .eq('id', id)\n      .single();\n\n    if (error) throw error;\n    return data;\n  },\n\n  /**\n   * Add service to salon\n   */\n  async addServiceToSalon(service: Omit<SalonService, 'id' | 'created_at'>): Promise<SalonService> {\n    const { data, error } = await supabase\n      .from('salon_services')\n      .insert(service)\n      .select()\n      .single();\n\n    if (error) throw error;\n    return data;\n  },\n\n  /**\n   * Update salon service pricing\n   */\n  async updateSalonService(id: string, updates: Partial<SalonService>): Promise<SalonService> {\n    const { data, error } = await supabase\n      .from('salon_services')\n      .update(updates)\n      .eq('id', id)\n      .select()\n      .single();\n\n    if (error) throw error;\n    return data;\n  },\n};\n\n// ==============================================\n// WORKING HOURS SERVICE\n// ==============================================\n\nexport const WorkingHoursService = {\n  /**\n   * Get working hours for staff member\n   */\n  async getWorkingHoursByStaff(staffId: string): Promise<WorkingHours[]> {\n    const { data, error } = await supabase\n      .from('working_hours')\n      .select('*')\n      .eq('staff_id', staffId)\n      .order('day_of_week');\n\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Set working hours for staff\n   */\n  async setWorkingHours(hours: Omit<WorkingHours, 'id' | 'created_at'>): Promise<WorkingHours> {\n    const { data, error } = await supabase\n      .from('working_hours')\n      .upsert(hours, { onConflict: 'staff_id,day_of_week' })\n      .select()\n      .single();\n\n    if (error) throw error;\n    return data;\n  },\n};\n\n// ==============================================\n// APPOINTMENT SERVICE\n// ==============================================\n\nexport const AppointmentService = {\n  /**\n   * Get appointment by ID\n   */\n  async getAppointmentById(id: string): Promise<Appointment | null> {\n    const { data, error } = await supabase\n      .from('appointments')\n      .select('*')\n      .eq('id', id)\n      .single();\n\n    if (error) throw error;\n    return data;\n  },\n\n  /**\n   * Get appointments for a salon\n   */\n  async getAppointmentsBySalon(salonId: string, startDate?: string, endDate?: string): Promise<Appointment[]> {\n    let query = supabase\n      .from('appointments')\n      .select('*')\n      .eq('salon_id', salonId);\n\n    if (startDate) {\n      query = query.gte('start_time', startDate);\n    }\n    if (endDate) {\n      query = query.lte('start_time', endDate);\n    }\n\n    query = query.order('start_time');\n\n    const { data, error } = await query;\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Get appointments for a staff member\n   */\n  async getAppointmentsByStaff(staffId: string, date: string): Promise<Appointment[]> {\n    const startOfDay = new Date(date);\n    startOfDay.setHours(0, 0, 0, 0);\n\n    const endOfDay = new Date(date);\n    endOfDay.setHours(23, 59, 59, 999);\n\n    const { data, error } = await supabase\n      .from('appointments')\n      .select('*')\n      .eq('staff_id', staffId)\n      .gte('start_time', startOfDay.toISOString())\n      .lte('start_time', endOfDay.toISOString())\n      .order('start_time');\n\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Get appointments by customer phone\n   */\n  async getAppointmentsByPhone(phone: string): Promise<Appointment[]> {\n    const { data, error } = await supabase\n      .from('appointments')\n      .select('*')\n      .eq('customer_phone', phone)\n      .order('start_time', { ascending: false });\n\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Create new appointment\n   */\n  async createAppointment(appointment: Omit<Appointment, 'id' | 'created_at' | 'updated_at'>): Promise<Appointment> {\n    const { data, error } = await supabase\n      .from('appointments')\n      .insert(appointment)\n      .select()\n      .single();\n\n    if (error) throw error;\n    return data;\n  },\n\n  /**\n   * Update appointment status\n   */\n  async updateAppointmentStatus(id: string, status: Appointment['status']): Promise<Appointment> {\n    const { data, error } = await supabase\n      .from('appointments')\n      .update({ status })\n      .eq('id', id)\n      .select()\n      .single();\n\n    if (error) throw error;\n    return data;\n  },\n\n  /**\n   * Cancel appointment\n   */\n  async cancelAppointment(id: string): Promise<Appointment> {\n    return this.updateAppointmentStatus(id, 'CANCELLED');\n  },\n};\n\n// ==============================================\n// REVIEW SERVICE\n// ==============================================\n\nexport const ReviewService = {\n  /**\n   * Get reviews for a salon\n   */\n  async getReviewsBySalon(salonId: string, limit: number = 50): Promise<Review[]> {\n    const { data, error } = await supabase\n      .from('reviews')\n      .select('*')\n      .eq('salon_id', salonId)\n      .order('created_at', { ascending: false })\n      .limit(limit);\n\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Create new review\n   */\n  async createReview(review: Omit<Review, 'id' | 'created_at'>): Promise<Review> {\n    const { data, error } = await supabase\n      .from('reviews')\n      .insert(review)\n      .select()\n      .single();\n\n    if (error) throw error;\n    return data;\n  },\n\n  /**\n   * Get salon rating summary\n   */\n  async getSalonRating(salonId: string): Promise<{ average: number; count: number }> {\n    const { data, error } = await supabase\n      .from('salon_ratings')\n      .select('*')\n      .eq('salon_id', salonId)\n      .single();\n\n    if (error) return { average: 0, count: 0 };\n\n    return {\n      average: data?.average_rating || 0,\n      count: data?.review_count || 0,\n    };\n  },\n};\n\n// ==============================================\n// IYS LOG SERVICE (SMS Compliance)\n// ==============================================\n\nexport const IYSService = {\n  /**\n   * Log SMS send\n   */\n  async logSMS(log: Omit<IYSLog, 'id' | 'created_at'>): Promise<IYSLog> {\n    const { data, error } = await supabase\n      .from('iys_logs')\n      .insert(log)\n      .select()\n      .single();\n\n    if (error) throw error;\n    return data;\n  },\n\n  /**\n   * Get SMS logs by phone\n   */\n  async getLogsByPhone(phone: string, limit: number = 50): Promise<IYSLog[]> {\n    const { data, error } = await supabase\n      .from('iys_logs')\n      .select('*')\n      .eq('phone', phone)\n      .order('created_at', { ascending: false })\n      .limit(limit);\n\n    if (error) throw error;\n    return data || [];\n  },\n\n  /**\n   * Get all IYS logs (admin)\n   */\n  async getAllLogs(limit: number = 100): Promise<IYSLog[]> {\n    const { data, error } = await supabase\n      .from('iys_logs')\n      .select('*')\n      .order('created_at', { ascending: false })\n      .limit(limit);\n\n    if (error) throw error;\n    return data || [];\n  },\n};\n\n// ==============================================\n// LEGACY COMPATIBILITY (for existing components)\n// ==============================================\n\n// Re-export new services with old names for backward compatibility\nexport const MasterService = MasterDataService;\n\n// Export all services\nexport default {\n  MasterDataService,\n  MasterService,\n  SalonDataService,\n  StaffService,\n  ServiceService,\n  WorkingHoursService,\n  AppointmentService,\n  ReviewService,\n  IYSService,\n};\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 409, "column": 0}, "map": {"version":3,"sources":["file:///D:/JAVA/projeler_2025/guzellik-randevu/guzellik-randevu-ui-main/components/Layout.tsx"],"sourcesContent":["\nimport React, { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport { useAuth } from '@/context/AuthContext';\nimport { MasterService } from '@/services/db';\nimport { SalonType, ServiceCategory } from '@/types';\n\nexport const Layout: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const pathname = usePathname();\n  const { user, signOut, isAdmin } = useAuth();\n  const isBooking = pathname.includes('/booking');\n\n  // Dynamic Menu State\n  const [salonTypes, setSalonTypes] = useState<SalonType[]>([]);\n  const [categories, setCategories] = useState<ServiceCategory[]>([]);\n  const [servicesByCat, setServicesByCat] = useState<Record<string, string[]>>({});\n\n  useEffect(() => {\n    const fetchMenuData = async () => {\n        const { salonTypes, categories, servicesByCatId } = await MasterService.getNavMenuData();\n        setSalonTypes(salonTypes);\n        setCategories(categories);\n        setServicesByCat(servicesByCatId);\n    };\n    fetchMenuData();\n  }, []);\n\n  return (\n    <div className=\"flex flex-col min-h-screen bg-background\">\n      <header className=\"sticky top-0 z-50 flex items-center justify-between whitespace-nowrap border-b border-border bg-surface/90 backdrop-blur-md px-4 md:px-6 py-4 shadow-sm\">\n        <div className=\"flex items-center gap-4 shrink-0\">\n          <Link href=\"/\" className=\"flex items-center gap-2 group\">\n            <div className=\"size-10 flex items-center justify-center bg-primary rounded-full text-white shadow-lg shadow-primary/20 group-hover:scale-110 transition-transform\">\n              <span className=\"font-display font-bold text-xl\">G</span>\n            </div>\n            <h2 className=\"text-text-main text-2xl font-display font-bold leading-tight tracking-[-0.015em] hidden sm:block\">\n              Güzellik <span className=\"text-primary\">Randevu</span>\n            </h2>\n          </Link>\n        </div>\n        \n        {/* Central Navigation with Dynamic Dropdowns */}\n        <nav className=\"hidden lg:flex items-center gap-1 mx-4\">\n          \n          {/* 1. Salonlar Dropdown (Salon Types) */}\n          <div className=\"relative group px-3 py-3\">\n             <Link \n                href=\"/\"\n                className={`text-sm font-bold transition-colors flex items-center gap-1 group-hover:text-primary ${pathname === '/' ? 'text-primary' : 'text-text-secondary'}`}\n                suppressHydrationWarning\n              >\n                Salonlar\n                <span className=\"material-symbols-outlined text-[16px]\">expand_more</span>\n              </Link>\n              \n              <div className=\"absolute top-full left-0 mt-0 w-64 bg-surface border border-border rounded-xl shadow-soft opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform origin-top-left overflow-hidden z-50 max-h-[80vh] overflow-y-auto\">\n                  <div className=\"py-2\">\n                      <Link href=\"/?type=all\" className=\"block px-4 py-2 text-sm text-text-secondary hover:bg-surface-alt hover:text-primary hover:pl-5 transition-all font-bold\">Tüm Salonlar</Link>\n                      {salonTypes.map((type) => (\n                          <Link \n                            key={type.id} \n                            href={`/?type=${type.slug}`}\n                            className=\"block px-4 py-2 text-sm text-text-secondary hover:bg-surface-alt hover:text-primary hover:pl-5 transition-all\"\n                          >\n                              {type.name}\n                          </Link>\n                      ))}\n                  </div>\n              </div>\n          </div>\n\n          {/* 2. Service Categories (Dynamic) */}\n          {categories.map((cat, index) => {\n              const services = servicesByCat[cat.id] || [];\n              const hasDropdown = services.length > 0;\n              \n              // Handle dropdown positioning for items on the right side of the screen\n              const isRightAligned = index > 3; \n\n              if (hasDropdown) {\n                  return (\n                    <div key={cat.id} className=\"relative group px-2 py-3\">\n                        <Link \n                            href={`/?search=${encodeURIComponent(cat.name)}`}\n                            className=\"text-sm font-medium text-text-secondary hover:text-primary transition-colors flex items-center gap-0.5\"\n                        >\n                            {cat.name}\n                            <span className=\"material-symbols-outlined text-[16px]\">expand_more</span>\n                        </Link>\n                        <div className={`absolute top-full mt-0 w-64 bg-surface border border-border rounded-xl shadow-soft opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform overflow-hidden z-50 max-h-[80vh] overflow-y-auto custom-scrollbar ${isRightAligned ? 'right-0 origin-top-right' : 'left-0 origin-top-left'}`}>\n                            <div className=\"py-2\">\n                                <Link href={`/?search=${encodeURIComponent(cat.name)}`} className=\"block px-4 py-2 text-sm font-bold text-text-main hover:bg-surface-alt hover:pl-5 transition-all border-b border-gray-100\">\n                                    Tüm {cat.name} Hizmetleri\n                                </Link>\n                                {services.map((serviceName, idx) => (\n                                    <Link \n                                        key={idx} \n                                        href={`/?search=${encodeURIComponent(serviceName)}`}\n                                        className=\"block px-4 py-2 text-sm text-text-secondary hover:bg-surface-alt hover:text-primary hover:pl-5 transition-all\"\n                                    >\n                                        {serviceName}\n                                    </Link>\n                                ))}\n                            </div>\n                        </div>\n                    </div>\n                  );\n              }\n\n              // Simple Link for categories without services\n              return (\n                <Link \n                    key={cat.id} \n                    href={`/?search=${encodeURIComponent(cat.name)}`}\n                    className=\"px-2 py-3 text-sm font-medium text-text-secondary hover:text-primary transition-colors\"\n                >\n                    {cat.name}\n                </Link>\n              );\n          })}\n        </nav>\n        \n        <div className=\"flex flex-1 justify-end gap-3 items-center shrink-0\">\n           {!isBooking && isAdmin && (\n              <Link href=\"/admin\" className=\"hidden xl:flex items-center justify-center px-4 py-2 bg-text-main hover:bg-black text-white text-xs font-bold rounded-full shadow-lg transition-all hover:scale-105 whitespace-nowrap\">\n                Yönetim\n              </Link>\n           )}\n           {!isBooking && user?.role === 'staff' && !isAdmin && (\n              <Link href=\"/booking/1/staff\" className=\"hidden xl:flex items-center justify-center px-4 py-2 bg-primary hover:bg-primary-hover text-white text-xs font-bold rounded-full shadow-lg shadow-primary/20 transition-all hover:scale-105 whitespace-nowrap\">\n                İşletme Ekle\n              </Link>\n           )}\n            \n            {user ? (\n                <div className=\"flex items-center gap-2\">\n                    <span className=\"text-sm font-bold text-text-main hidden xl:block truncate max-w-[100px]\">{user.full_name}</span>\n                    <div className=\"group relative\">\n                        <div \n                          className=\"bg-center bg-no-repeat aspect-square bg-cover rounded-full size-9 border-2 border-border cursor-pointer hover:border-primary transition-colors\" \n                          style={{ backgroundImage: `url(\"${user.avatar_url}\")` }}\n                        ></div>\n                        <div className=\"absolute right-0 top-full mt-2 w-48 bg-surface border border-border rounded-xl shadow-soft opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform origin-top-right z-50\">\n                             <div className=\"p-2\">\n                                 {isAdmin && <Link href=\"/admin\" className=\"block px-4 py-2 text-sm text-text-secondary hover:bg-surface-alt hover:text-text-main rounded-lg font-bold\">Admin Paneli</Link>}\n                                 <Link href=\"/profile\" className=\"block px-4 py-2 text-sm text-text-secondary hover:bg-surface-alt hover:text-text-main rounded-lg\">Profilim</Link>\n                                 <Link href=\"/bookings\" className=\"block px-4 py-2 text-sm text-text-secondary hover:bg-surface-alt hover:text-text-main rounded-lg\">Randevularım</Link>\n                                 <div className=\"h-px bg-border my-1\"></div>\n                                 <button onClick={signOut} className=\"w-full text-left px-4 py-2 text-sm text-red-500 hover:bg-surface-alt hover:text-red-600 rounded-lg\">Çıkış Yap</button>\n                             </div>\n                        </div>\n                    </div>\n                </div>\n            ) : (\n                <div className=\"flex items-center gap-3\">\n                  <Link href=\"/login\" className=\"text-text-secondary hover:text-primary transition-colors text-sm font-medium whitespace-nowrap hidden sm:block\">\n                      Giriş Yap\n                  </Link>\n                  <Link href=\"/login\" className=\"px-5 py-2 bg-primary hover:bg-primary-hover text-white text-sm font-bold rounded-full shadow-lg shadow-primary/20 transition-all hover:scale-105 hidden sm:block whitespace-nowrap\">\n                      Kayıt Ol\n                  </Link>\n                </div>\n            )}\n            \n            <div className=\"lg:hidden text-text-main cursor-pointer p-2 hover:bg-surface-alt rounded-full transition-colors\">\n              <span className=\"material-symbols-outlined\">menu</span>\n            </div>\n        </div>\n        \n      </header>\n\n      <main className=\"flex-1 flex flex-col w-full\">\n        {children}\n      </main>\n\n      <footer className=\"border-t border-border bg-white pt-16 pb-8 mt-auto\">\n        <div className=\"max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8\">\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-12 mb-12\">\n                <div className=\"col-span-1\">\n                    <div className=\"flex items-center gap-2 mb-6\">\n                        <div className=\"size-8 bg-primary rounded-full flex items-center justify-center text-white font-display text-lg font-bold\">G</div>\n                        <span className=\"font-display font-bold text-xl text-text-main\">Güzellik <span className=\"text-primary\">Randevu</span></span>\n                    </div>\n                    <p className=\"text-sm leading-relaxed text-text-secondary mb-6\">\n                        Türkiye'nin en kapsamlı kişisel bakım ve güzellik platformu. Randevunuzu kolayca alın, güzelliğinize güzellik katın.\n                    </p>\n                </div>\n                <div>\n                    <h4 className=\"text-text-main font-bold mb-6\">Hızlı Erişim</h4>\n                    <ul className=\"space-y-3 text-sm text-text-secondary\">\n                        <li><a href=\"#\" className=\"hover:text-primary transition-colors\">Hakkımızda</a></li>\n                        <li><a href=\"#\" className=\"hover:text-primary transition-colors\">İletişim</a></li>\n                        <li><a href=\"#\" className=\"hover:text-primary transition-colors\">Kariyer</a></li>\n                        <li><a href=\"#\" className=\"hover:text-primary transition-colors\">Blog</a></li>\n                    </ul>\n                </div>\n                <div>\n                    <h4 className=\"text-text-main font-bold mb-6\">Kategoriler</h4>\n                    <ul className=\"space-y-3 text-sm text-text-secondary\">\n                        {salonTypes.slice(0, 5).map(t => (\n                            <li key={t.id}><Link href={`/?type=${t.slug}`} className=\"hover:text-primary transition-colors\">{t.name}</Link></li>\n                        ))}\n                    </ul>\n                </div>\n                <div>\n                    <h4 className=\"text-text-main font-bold mb-6\">İşletmeler İçin</h4>\n                    <ul className=\"space-y-3 text-sm text-text-secondary\">\n                        <li><a href=\"#\" className=\"hover:text-primary transition-colors\">İşletme Ekle</a></li>\n                        <li><a href=\"#\" className=\"hover:text-primary transition-colors\">Yönetim Paneli</a></li>\n                        <li><a href=\"#\" className=\"hover:text-primary transition-colors\">Başarı Hikayeleri</a></li>\n                        <li><a href=\"#\" className=\"hover:text-primary transition-colors\">Destek</a></li>\n                    </ul>\n                </div>\n            </div>\n            <div className=\"border-t border-border pt-8 flex flex-col md:flex-row justify-between items-center text-xs text-text-muted\">\n              <p>© 2024 Güzellik Randevu. Tüm hakları saklıdır.</p>\n              <div className=\"flex gap-6 mt-4 md:mt-0\">\n                <a href=\"#\" className=\"hover:text-primary transition-colors\">Gizlilik Politikası</a>\n                <a href=\"#\" className=\"hover:text-primary transition-colors\">Kullanım Şartları</a>\n              </div>\n            </div>\n        </div>\n      </footer>\n    </div>\n  );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1170, "column": 0}, "map": {"version":3,"sources":["file:///D:/JAVA/projeler_2025/guzellik-randevu/guzellik-randevu-ui-main/components/BookingSummary.tsx"],"sourcesContent":["import React from 'react';\nimport Link from 'next/link';\nimport { Salon, Staff, Service, SalonServiceDetail, SalonDetail } from '@/types';\n\ninterface BookingSummaryProps {\n  salon: Salon | SalonDetail;\n  staff?: Staff | null;\n  services: Service[] | SalonServiceDetail[];\n  totalPrice: number;\n  totalDuration: string;\n  step: number; // 1: Staff, 2: Time, 3: User Info, 4: Confirm\n}\n\nexport const BookingSummary: React.FC<BookingSummaryProps> = ({ \n  salon, \n  staff, \n  services, \n  totalPrice, \n  totalDuration, \n  step \n}) => {\n  return (\n    <div className=\"w-full lg:w-80 shrink-0\">\n      <div className=\"sticky top-24 flex flex-col gap-4\">\n        \n        {/* Step 2+ Visuals (Salon Image Card for Time/User-Info/Confirm pages) */}\n        {step >= 2 && (\n             <div className=\"rounded-xl bg-white border border-border overflow-hidden shadow-md mb-2\">\n             <div className=\"h-32 w-full bg-cover bg-center relative\" style={{ backgroundImage: `url(\\\"${salon.image}\\\")` }}>\n               <div className=\"absolute inset-0 bg-gradient-to-t from-gray-900/80 to-transparent\"></div>\n               <div className=\"absolute bottom-4 left-4\">\n                 <h3 className=\"text-white text-lg font-bold leading-tight\">{salon.name}</h3>\n                 <div className=\"flex items-center gap-1 text-primary text-sm mt-1\">\n                   <span className=\"material-symbols-outlined text-[16px] fill-current\" style={{ fontVariationSettings: \"'FILL' 1\" }}>star</span>\n                   <span className=\"font-bold\">{'average_rating' in salon ? salon.average_rating : 0}</span>\n                   <span className=\"text-gray-300 font-normal\">• {'city_name' in salon ? `${salon.district_name}, ${salon.city_name}` : salon.address}</span>\n                 </div>\n               </div>\n             </div>\n           </div>\n        )}\n\n        <div className=\"bg-white rounded-xl border border-border overflow-hidden shadow-card flex flex-col\">\n          <div className=\"p-4 border-b border-border bg-gray-50\">\n            <h3 className=\"text-text-main font-bold text-lg\">Randevu Özeti</h3>\n            <p className=\"text-text-secondary text-xs\">Seçimleriniz aşağıdadır</p>\n          </div>\n          \n          <div className=\"p-4 flex flex-col gap-4 max-h-[400px] overflow-y-auto custom-scrollbar\">\n            {services.map((service) => {\n              // Handle both Service and SalonServiceDetail types\n              const serviceName = 'service_name' in service ? service.service_name : service.name;\n              const serviceDuration = 'duration_min' in service ? `${service.duration_min} dk` : service.duration;\n              const servicePrice = service.price;\n\n              return (\n                <div key={service.id} className=\"flex justify-between items-start gap-2\">\n                  <div className=\"flex flex-col\">\n                    <span className=\"text-text-main text-sm font-medium\">{serviceName}</span>\n                    <span className=\"text-text-secondary text-xs\">{serviceDuration}</span>\n                  </div>\n                  <span className=\"text-primary font-bold text-sm whitespace-nowrap\">{servicePrice} TL</span>\n                </div>\n              );\n            })}\n\n            {staff && (\n              <div className=\"mt-2 pt-4 border-t border-dashed border-gray-200\">\n                <div className=\"flex items-center gap-3 bg-gray-50 p-2 rounded-lg border border-border relative\">\n                  <div className=\"size-8 rounded-full bg-cover bg-center border border-gray-200\" style={{ backgroundImage: `url(\\\"${staff.image}\\\")` }}></div>\n                  <div className=\"flex flex-col\">\n                    <span className=\"text-text-main text-xs font-bold\">{staff.name}</span>\n                    <span className=\"text-primary text-[10px]\">{staff.role}</span>\n                  </div>\n                  {step === 1 && (\n                     <button className=\"ml-auto text-text-muted hover:text-red-500 transition-colors\">\n                        <span className=\"material-symbols-outlined text-[16px]\">close</span>\n                     </button>\n                  )}\n                   {(step === 2 || step === 3) && (\n                       <Link href={`/booking/${salon.id}/staff`} className=\"ml-auto text-primary text-[10px] font-bold hover:underline\">Değiştir</Link>\n                  )}\n                </div>\n              </div>\n            )}\n          </div>\n          \n          <div className=\"p-4 bg-gray-50 border-t border-border\">\n            <div className=\"flex justify-between items-center mb-1\">\n              <span className=\"text-text-secondary text-sm\">Toplam Süre</span>\n              <span className=\"text-text-main text-sm font-medium\">{totalDuration}</span>\n            </div>\n            <div className=\"flex justify-between items-end mb-4\">\n              <span className=\"text-text-secondary text-sm\">Toplam Tutar</span>\n              <span className=\"text-text-main text-xl font-bold\">{totalPrice} TL</span>\n            </div>\n            \n            {step === 1 && (\n                <button disabled={!staff} className={`w-full h-12 rounded-lg font-bold text-base transition-colors shadow-md flex items-center justify-center gap-2 ${staff ? 'bg-primary text-white hover:bg-primary-hover' : 'bg-gray-100 text-text-muted cursor-not-allowed'}`}>\n                  {staff ? 'Devam Et' : 'Personel Seçiniz'}\n                  <span className=\"material-symbols-outlined text-[20px]\">arrow_forward</span>\n                </button>\n            )}\n            \n            {step < 4 && (\n                <p className=\"text-center text-text-muted text-[10px] mt-2\">Ödeme aşamasına henüz geçilmedi.</p>\n            )}\n          </div>\n        </div>\n\n        {/* Help Box - Only show on step 1 */}\n        {step === 1 && (\n            <div className=\"p-4 rounded-xl bg-blue-50 border border-blue-100 flex items-start gap-3\">\n            <span className=\"material-symbols-outlined text-blue-600 mt-0.5\">help</span>\n            <div>\n                <p className=\"text-blue-900 text-sm font-bold\">Yardıma mı ihtiyacınız var?</p>\n                <p className=\"text-blue-700 text-xs mt-1\">Personel seçimi konusunda kararsız kaldıysanız bizi arayabilirsiniz.</p>\n                <a href=\"#\" className=\"text-blue-600 text-xs font-bold mt-2 inline-block hover:underline\">0212 555 01 23</a>\n            </div>\n            </div>\n        )}\n      </div>\n    </div>\n  );\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1590, "column": 0}, "map": {"version":3,"sources":["file:///D:/JAVA/projeler_2025/guzellik-randevu/guzellik-randevu-ui-main/app/booking/%5Bid%5D/confirm/page.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { Layout } from '@/components/Layout';\nimport { BookingSummary } from '@/components/BookingSummary';\nimport { SalonDataService, StaffService, ServiceService, AppointmentService } from '@/services/db';\nimport { useParams, useSearchParams } from 'next/navigation';\nimport { useBooking } from '@/context/BookingContext';\nimport type { SalonDetail, Staff, SalonServiceDetail, Appointment } from '@/types';\n\nexport default function Confirmation() {\n    const params = useParams();\n    const searchParams = useSearchParams();\n    const appointmentId = searchParams.get('appointmentId'); // Optional: for viewing existing appointment\n    const salonId = params.id as string;\n\n    // Get booking context (for new bookings during flow)\n    const {\n        salon: bookingSalon,\n        selectedService: bookingService,\n        selectedStaff: bookingStaff,\n        selectedDate,\n        selectedTime\n    } = useBooking();\n\n    const [appointment, setAppointment] = useState<Appointment | null>(null);\n    const [salon, setSalon] = useState<SalonDetail | null>(bookingSalon);\n    const [staff, setStaff] = useState<Staff | null>(bookingStaff);\n    const [service, setService] = useState<SalonServiceDetail | null>(bookingService);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState<string | null>(null);\n\n    useEffect(() => {\n        const fetchBookingData = async () => {\n            try {\n                setLoading(true);\n\n                // If appointmentId is provided, fetch existing appointment\n                if (appointmentId) {\n                    const appointmentData = await AppointmentService.getAppointmentById(appointmentId);\n\n                    if (!appointmentData) {\n                        setError('Randevu bulunamadı');\n                        setLoading(false);\n                        return;\n                    }\n\n                    setAppointment(appointmentData);\n\n                    // Fetch related data in parallel\n                    const [salonData, staffData, serviceData] = await Promise.all([\n                        SalonDataService.getSalonById(appointmentData.salon_id),\n                        StaffService.getStaffById(appointmentData.staff_id),\n                        ServiceService.getServiceById(appointmentData.salon_service_id)\n                    ]);\n\n                    setSalon(salonData);\n                    setStaff(staffData);\n                    setService(serviceData);\n                } else {\n                    // No appointmentId - this is during booking flow\n                    // Use booking context data or fetch if missing\n                    if (!bookingSalon && salonId) {\n                        const salonData = await SalonDataService.getSalonById(salonId);\n                        setSalon(salonData);\n                    }\n\n                    // Check if we have all required data from context\n                    if (!bookingSalon || !bookingService || !bookingStaff) {\n                        setError('Randevu bilgileri eksik. Lütfen baştan başlayın.');\n                        setLoading(false);\n                        return;\n                    }\n                }\n\n                setLoading(false);\n            } catch (err) {\n                console.error('Error fetching booking data:', err);\n                setError('Randevu bilgileri yüklenirken bir hata oluştu');\n                setLoading(false);\n            }\n        };\n\n        fetchBookingData();\n    }, [appointmentId, salonId, bookingSalon, bookingService, bookingStaff]);\n\n    // Calculate totals\n    const totalPrice = service?.price || 0;\n    const totalDuration = service?.duration_min ? `${service.duration_min} dakika` : 'Belirsiz';\n\n    return (\n        <Layout>\n            <div className=\"flex-1 flex justify-center py-8 px-4 md:px-10 lg:px-20 bg-background min-h-screen\">\n                <div className=\"w-full max-w-[1280px] flex flex-col gap-8\">\n                    {loading ? (\n                        <div className=\"flex items-center justify-center min-h-[400px]\">\n                            <div className=\"text-center\">\n                                <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\n                                <p className=\"text-text-secondary\">Randevu bilgileri yükleniyor...</p>\n                            </div>\n                        </div>\n                    ) : error ? (\n                        <div className=\"flex items-center justify-center min-h-[400px]\">\n                            <div className=\"bg-white rounded-xl border border-red-200 p-8 text-center max-w-md\">\n                                <span className=\"material-symbols-outlined text-6xl text-red-500\">error</span>\n                                <h2 className=\"text-2xl font-bold text-text-main mt-4\">Hata</h2>\n                                <p className=\"text-text-secondary mt-2\">{error}</p>\n                                <a href=\"/\" className=\"mt-6 inline-block px-6 py-3 bg-primary text-white rounded-lg font-bold hover:bg-primary-hover\">\n                                    Ana Sayfaya Dön\n                                </a>\n                            </div>\n                        </div>\n                    ) : (\n                        <div className=\"flex flex-col lg:flex-row gap-8 items-start\">\n                            <div className=\"w-full lg:w-[380px] flex-shrink-0 lg:sticky lg:top-24 order-2 lg:order-1\">\n                                {salon && staff && service && (\n                                    <BookingSummary\n                                        salon={salon}\n                                        staff={staff}\n                                        services={[service]}\n                                        totalPrice={totalPrice}\n                                        totalDuration={totalDuration}\n                                        step={3}\n                                    />\n                                )}\n                            </div>\n                            <main className=\"flex-1 w-full min-w-0 order-1 lg:order-2\">\n                                <div className=\"bg-white rounded-xl border border-border p-6 lg:p-8 shadow-card text-center\">\n                                    <span className=\"material-symbols-outlined text-6xl text-green-500\">check_circle</span>\n                                    <h1 className=\"text-3xl font-bold text-text-main mt-4\">Randevunuz Onaylandı!</h1>\n                                    <p className=\"text-text-secondary mt-2\">Randevu detaylarınız aşağıdadır. E-posta ve SMS ile de bilgilendirme yapılmıştır.</p>\n\n                                    {appointment && salon && staff && service && (\n                                        <div className=\"mt-8 text-left bg-gray-50 p-6 rounded-lg border border-border space-y-3\">\n                                            <div className=\"flex justify-between items-center border-b border-gray-200 pb-2\">\n                                                <span className=\"font-semibold text-text-secondary\">Salon:</span>\n                                                <span className=\"font-bold text-text-main\">{salon.name}</span>\n                                            </div>\n                                            <div className=\"flex justify-between items-center border-b border-gray-200 pb-2\">\n                                                <span className=\"font-semibold text-text-secondary\">Personel:</span>\n                                                <span className=\"font-bold text-text-main\">{staff.name}</span>\n                                            </div>\n                                            <div className=\"flex justify-between items-center border-b border-gray-200 pb-2\">\n                                                <span className=\"font-semibold text-text-secondary\">Tarih & Saat:</span>\n                                                <span className=\"font-bold text-text-main\">\n                                                    {new Date(appointment.start_time).toLocaleDateString('tr-TR', {\n                                                        day: 'numeric',\n                                                        month: 'long',\n                                                        year: 'numeric'\n                                                    })} - {new Date(appointment.start_time).toLocaleTimeString('tr-TR', {\n                                                        hour: '2-digit',\n                                                        minute: '2-digit'\n                                                    })}\n                                                </span>\n                                            </div>\n                                            <div className=\"flex justify-between items-center border-b border-gray-200 pb-2\">\n                                                <span className=\"font-semibold text-text-secondary\">Hizmet:</span>\n                                                <span className=\"font-bold text-text-main\">{service.service_name}</span>\n                                            </div>\n                                            <div className=\"flex justify-between items-center border-b border-gray-200 pb-2\">\n                                                <span className=\"font-semibold text-text-secondary\">Süre:</span>\n                                                <span className=\"font-bold text-text-main\">{totalDuration}</span>\n                                            </div>\n                                            <div className=\"flex justify-between items-center pt-2\">\n                                                <span className=\"font-semibold text-text-secondary text-lg\">Toplam Tutar:</span>\n                                                <span className=\"font-bold text-primary text-xl\">{totalPrice} ₺</span>\n                                            </div>\n\n                                            {appointment.notes && (\n                                                <div className=\"mt-4 pt-4 border-t border-gray-200\">\n                                                    <span className=\"font-semibold text-text-secondary block mb-2\">Notlar:</span>\n                                                    <p className=\"text-text-main text-sm bg-white p-3 rounded border border-gray-200\">\n                                                        {appointment.notes}\n                                                    </p>\n                                                </div>\n                                            )}\n                                        </div>\n                                    )}\n\n                                    <div className=\"mt-6 flex flex-col sm:flex-row gap-3 justify-center\">\n                                        <a\n                                            href={salon ? `/salon/${salon.id}` : '/'}\n                                            className=\"px-6 py-3 bg-gray-100 text-text-main rounded-lg font-bold hover:bg-gray-200 transition-colors\"\n                                        >\n                                            Salona Git\n                                        </a>\n                                        <a\n                                            href=\"/\"\n                                            className=\"px-6 py-3 bg-primary text-white rounded-lg font-bold hover:bg-primary-hover transition-colors\"\n                                        >\n                                            Ana Sayfaya Dön\n                                        </a>\n                                    </div>\n                                </div>\n                            </main>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </Layout>\n    );\n}\n\n"],"names":[],"mappings":"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"}}]
}