{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/JAVA/projeler_2025/guzellik-randevu/guzellik-randevu-ui-main/components/Map/SalonMap.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from 'react-leaflet';\nimport * as L from 'leaflet';\nimport { SalonDetail } from '@/types';\nimport { useRouter } from 'next/navigation';\n\n// Helper: Strict Coordinate Validation\nconst isValidLatLng = (lat: any, lng: any): boolean => {\n    if (lat === null || lat === undefined || lng === null || lng === undefined) return false;\n    const numLat = Number(lat);\n    const numLng = Number(lng);\n    return !isNaN(numLat) && !isNaN(numLng) && isFinite(numLat) && isFinite(numLng);\n};\n\n// Updates map center when city changes\nconst MapUpdater: React.FC<{ center: { lat: number; lng: number } }> = ({ center }) => {\n    const map = useMap();\n    useEffect(() => {\n        // Strict validation before flying\n        if (center && isValidLatLng(center.lat, center.lng)) {\n            const lat = Number(center.lat);\n            const lng = Number(center.lng);\n            map.flyTo([lat, lng], 12, { duration: 2 });\n        }\n    }, [center, map]);\n    return null;\n};\n\n// Custom Marker Icon (Water Droplet with G Logo)\nconst createCustomIcon = (isHovered: boolean) => {\n    return L.divIcon({\n        className: 'custom-pin',\n        html: `\n            <div class=\"relative transition-all duration-300 ${isHovered ? 'scale-125 z-50' : 'scale-100 z-10'}\">\n    <div class=\"relative filter drop-shadow-lg\">\n        <svg width=\"40\" height=\"52\" viewBox=\"0 0 40 52\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" style=\"transform: rotate(180deg);\">\n            <defs>\n                 <linearGradient id=\"dropletGradient-${isHovered ? 'Hover' : ''}\" x1=\"20\" y1=\"0\" x2=\"20\" y2=\"52\">\n                    <stop offset=\"0%\" stop-color=\"${isHovered ? '#D4AF6A' : '#C59F59'}\" />\n                    <stop offset=\"100%\" stop-color=\"${isHovered ? '#C59F59' : '#B48F4A'}\" />\n                </linearGradient>\n            </defs>\n            <path d=\"M20 0C20 0 0 20 0 32C0 43.0457 8.95431 52 20 52C31.0457 52 40 43.0457 40 32C40 20 20 0 20 0Z\" \n                  fill=\"url(#dropletGradient-${isHovered ? 'Hover' : ''})\" \n                  class=\"transition-all duration-300\"/>\n            <path d=\"M20 0C20 0 0 20 0 32C0 43.0457 8.95431 52 20 52C31.0457 52 40 43.0457 40 32C40 20 20 0 20 0Z\" \n                  stroke=\"white\" \n                  stroke-width=\"2.5\" \n                  fill=\"none\"/>\n        </svg>\n        \n        <div class=\"absolute inset-0 flex items-center justify-center pb-3\">\n            <span class=\"text-white font-black text-2xl tracking-tight\" \n                  style=\"font-family: 'Inter', sans-serif; text-shadow: 0 1px 2px rgba(0,0,0,0.4);\">\n                G\n            </span>\n        </div>\n    </div>\n</div>\n        `,\n        iconSize: [40, 52],\n        iconAnchor: [20, 52], // Tip of the droplet (bottom after rotation, pointing to location)\n        popupAnchor: [0, -52],\n    });\n};\n\ninterface SalonMapProps {\n    center: { lat: number; lng: number };\n    salons: SalonDetail[];\n    hoveredSalonId: string | null;\n    onSalonHover: (id: string | null) => void;\n}\n\nexport const SalonMap: React.FC<SalonMapProps> = ({ center, salons, hoveredSalonId, onSalonHover }) => {\n    const router = useRouter();\n\n    return (\n        <MapContainer center={[center.lat, center.lng]} zoom={12} scrollWheelZoom={true} className=\"h-full w-full outline-none\" attributionControl={false}>\n            <TileLayer\n                attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n                url=\"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png\"\n            />\n            <MapUpdater center={center} />\n\n            {salons.map(salon => {\n                // Strict Coordinate Validation\n                if (!isValidLatLng(salon.coordinates?.lat, salon.coordinates?.lng)) {\n                    return null;\n                }\n                const salonLat = Number(salon.coordinates?.lat);\n                const salonLng = Number(salon.coordinates?.lng);\n\n                return (\n                    <Marker\n                        key={salon.id}\n                        position={[salonLat, salonLng]}\n                        icon={createCustomIcon(hoveredSalonId === salon.id)}\n                        eventHandlers={{\n                            mouseover: () => onSalonHover(salon.id),\n                            mouseout: () => onSalonHover(null),\n                            click: () => router.push(`/salon/${salon.id}`)\n                        }}\n                    >\n                        <Popup className=\"custom-popup\" closeButton={false} offset={[0, -52]}>\n                            <div className=\"p-0 w-48 overflow-hidden rounded-xl shadow-lg border-0\">\n                                <div className=\"h-28 bg-cover bg-center\" style={{ backgroundImage: `url(\"${salon.image}\")` }}>\n                                    <div className=\"absolute top-2 right-2 bg-white px-1.5 py-0.5 rounded text-[10px] font-bold shadow-sm flex items-center gap-0.5\">\n                                        <span className=\"material-symbols-outlined text-[10px] filled text-yellow-500\">star</span> {salon.rating}\n                                    </div>\n                                </div>\n                                <div className=\"p-3 bg-white\">\n                                    <h3 className=\"font-bold text-sm text-gray-900 truncate mb-1\">{salon.name}</h3>\n                                    <p className=\"text-[10px] text-gray-500 truncate mb-2\">{salon.district}</p>\n                                    <div className=\"flex justify-between items-center border-t border-gray-100 pt-2\">\n                                        <span className=\"text-primary font-bold text-sm\">{salon.startPrice} ₺</span>\n                                        <span className=\"text-[10px] text-gray-400\">başlayan</span>\n                                    </div>\n                                </div>\n                            </div>\n                        </Popup>\n                    </Marker>\n                );\n            })}\n        </MapContainer>\n    );\n};\n\n"],"names":[],"mappings":"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"}}]
}