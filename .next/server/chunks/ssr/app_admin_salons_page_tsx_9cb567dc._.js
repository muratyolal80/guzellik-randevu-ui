module.exports=[88990,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(14001),e=a.i(14809);let f=a=>{let b={Istanbul:{lat:41.0082,lng:28.9784},Ankara:{lat:39.9208,lng:32.8541},Izmir:{lat:38.4237,lng:27.1428},Antalya:{lat:36.8969,lng:30.7133},Bursa:{lat:40.1885,lng:29.061}};return b[a]||b.Istanbul};function g(){let[a,g]=(0,c.useState)([]),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(null),t=(0,c.useRef)(null);(0,c.useEffect)(()=>{(async()=>{o(!0);let[a,b,c]=await Promise.all([e.SalonDataService.getSalons(),e.MasterDataService.getCities(),e.MasterDataService.getSalonTypes()]);g(a),i(b),k(c),o(!1)})()},[]);let[u,v]=(0,c.useState)([]);(0,c.useEffect)(()=>{(async()=>{if(r?.city){let a=h.find(a=>a.name===r.city);if(a){let b=await e.MasterDataService.getDistrictsByCity(a.id);m(b),v(b.map(a=>a.name))}}else m([]),v([])})()},[r?.city,h]);let w=async a=>{a.preventDefault(),r?.id?alert("Salon güncelleme özelliği yakında eklenecek"):alert("Yeni salon ekleme özelliği yakında eklenecek"),q(!1),s(null),g(await e.SalonDataService.getSalons())};return(0,b.jsxs)(d.AdminLayout,{children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-text-main",children:"Salon Yönetimi"}),(0,b.jsx)("p",{className:"text-text-secondary",children:"Sistemdeki tüm salonları düzenleyin, ekleyin veya kaldırın."})]}),(0,b.jsxs)("button",{onClick:()=>{s({name:"",location:"",city:"İstanbul",district:"",startPrice:0,image:"https://images.unsplash.com/photo-1560066984-138dadb4c035?q=80&w=800&auto=format&fit=crop",tags:[],typeIds:[],coordinates:{lat:41.0082,lng:28.9784},isSponsored:!1}),q(!0)},className:"px-6 py-2.5 bg-primary text-white font-bold rounded-xl hover:bg-primary-hover shadow-lg shadow-primary/20 flex items-center gap-2",children:[(0,b.jsx)("span",{className:"material-symbols-outlined",children:"add"})," Yeni Salon Ekle"]})]}),(0,b.jsx)("div",{className:"bg-white rounded-2xl border border-border shadow-sm overflow-hidden",children:(0,b.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"bg-gray-50 border-b border-gray-100 text-xs uppercase tracking-wider text-text-secondary font-semibold",children:[(0,b.jsx)("th",{className:"p-4",children:"Salon Adı"}),(0,b.jsx)("th",{className:"p-4",children:"Konum"}),(0,b.jsx)("th",{className:"p-4",children:"Kategori (Tür)"}),(0,b.jsx)("th",{className:"p-4",children:"Fiyat (Başlangıç)"}),(0,b.jsx)("th",{className:"p-4 text-right",children:"İşlemler"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-100",children:n?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:5,className:"p-8 text-center text-text-secondary",children:(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-primary"}),(0,b.jsx)("span",{children:"Yükleniyor..."})]})})}):0===a.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:5,className:"p-8 text-center text-text-secondary",children:"Henüz salon eklenmemiş."})}):a.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,b.jsx)("td",{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"size-10 rounded-lg bg-cover bg-center border border-border",style:{backgroundImage:`url('${a.image}')`}}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-bold text-text-main",children:a.name}),a.is_sponsored&&(0,b.jsx)("span",{className:"text-[10px] bg-primary text-white px-1.5 py-0.5 rounded font-bold",children:"ÖNERİLEN"})]})]})}),(0,b.jsx)("td",{className:"p-4 text-sm text-text-secondary",children:(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsxs)("span",{children:[a.district_name,", ",a.city_name]}),(0,b.jsx)("span",{className:"text-xs text-text-muted truncate max-w-[150px]",children:a.address})]})}),(0,b.jsx)("td",{className:"p-4",children:(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:a.type_name&&(0,b.jsx)("span",{className:"text-[10px] bg-blue-50 text-blue-600 px-2 py-1 rounded-full border border-blue-100",children:a.type_name})})}),(0,b.jsx)("td",{className:"p-4 text-sm font-bold text-text-main",children:"N/A ₺"}),(0,b.jsx)("td",{className:"p-4 text-right",children:(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)("button",{onClick:()=>{s({id:a.id,name:a.name,city:a.city_name,district:a.district_name,location:a.address,phone:a.phone,image:a.image,coordinates:{lat:a.geo_latitude||0,lng:a.geo_longitude||0},typeIds:[a.type_slug],tags:[a.type_name],startPrice:0,isSponsored:a.is_sponsored}),q(!0)},className:"p-2 text-text-secondary hover:text-primary hover:bg-primary/5 rounded-lg transition-colors",children:(0,b.jsx)("span",{className:"material-symbols-outlined text-lg",children:"edit"})}),(0,b.jsx)("button",{onClick:()=>{var b;return b=a.id,void(confirm("Bu salonu silmek istediğinize emin misiniz?")&&g(a=>a.filter(a=>a.id!==b)))},className:"p-2 text-text-secondary hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:(0,b.jsx)("span",{className:"material-symbols-outlined text-lg",children:"delete"})})]})})]},a.id))})]})}),p&&r&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 overflow-y-auto",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-4xl shadow-2xl flex flex-col max-h-[90vh]",children:[(0,b.jsxs)("div",{className:"p-6 border-b border-border flex justify-between items-center bg-white z-10 shrink-0 rounded-t-2xl",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-text-main",children:r.id?"Salonu Düzenle":"Yeni Salon Ekle"}),(0,b.jsx)("button",{onClick:()=>q(!1),className:"text-text-secondary hover:text-text-main",children:(0,b.jsx)("span",{className:"material-symbols-outlined",children:"close"})})]}),(0,b.jsx)("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:(0,b.jsxs)("form",{onSubmit:w,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-text-main mb-2",children:"Salon Adı"}),(0,b.jsx)("input",{required:!0,className:"w-full h-11 px-4 rounded-lg border border-border bg-gray-50 focus:bg-white focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-colors",value:r.name,onChange:a=>s({...r,name:a.target.value})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-text-main mb-2",children:"Şehir"}),(0,b.jsxs)("select",{className:"w-full h-11 px-4 rounded-lg border border-border bg-gray-50 focus:bg-white focus:border-primary focus:ring-1 focus:ring-primary outline-none",value:r.city,onChange:a=>{let b=a.target.value;s({...r,city:b,district:""})},children:[(0,b.jsx)("option",{value:"",children:"Seçiniz"}),h.map(a=>(0,b.jsx)("option",{value:a.name,children:a.name},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-text-main mb-2",children:"İlçe"}),(0,b.jsxs)("select",{disabled:!r.city,className:"w-full h-11 px-4 rounded-lg border border-border bg-gray-50 focus:bg-white focus:border-primary focus:ring-1 focus:ring-primary outline-none disabled:opacity-50",value:r.district,onChange:a=>s({...r,district:a.target.value}),children:[(0,b.jsx)("option",{value:"",children:"Seçiniz"}),u.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-text-main mb-2",children:"Açık Adres"}),(0,b.jsx)("div",{className:"flex gap-2",children:(0,b.jsx)("textarea",{required:!0,rows:3,className:"flex-1 p-4 rounded-lg border border-border bg-gray-50 focus:bg-white focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-colors",value:r.location,onChange:a=>s({...r,location:a.target.value})})}),(0,b.jsxs)("button",{type:"button",onClick:()=>{if(!r?.city)return void alert("Lütfen önce bir şehir seçiniz.");let a=f(r.city),b=a.lat+(Math.random()-.5)*.05,c=a.lng+(Math.random()-.5)*.05;s({...r,coordinates:{lat:parseFloat(b.toFixed(4)),lng:parseFloat(c.toFixed(4))}})},className:"mt-2 text-xs font-bold text-primary flex items-center gap-1 hover:underline",children:[(0,b.jsx)("span",{className:"material-symbols-outlined text-sm",children:"my_location"}),"Google Maps ile Konumu Bul"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-text-main mb-2",children:"Başlangıç Fiyatı (₺)"}),(0,b.jsx)("input",{type:"number",required:!0,className:"w-full h-11 px-4 rounded-lg border border-border bg-gray-50 focus:bg-white focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-colors",value:r.startPrice,onChange:a=>s({...r,startPrice:Number(a.target.value)})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-text-main mb-2",children:"Görsel URL"}),(0,b.jsx)("input",{className:"w-full h-11 px-4 rounded-lg border border-border bg-gray-50 focus:bg-white focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-colors",value:r.image,onChange:a=>s({...r,image:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-text-main",children:"Harita Konumu"}),(0,b.jsx)("div",{className:"text-xs text-text-secondary mb-2",children:"Konumu doğrulamak için harita üzerine tıklayın veya sürükleyin."}),(0,b.jsxs)("div",{ref:t,onClick:a=>{if(!t.current||!r?.city)return;let b=t.current.getBoundingClientRect(),c=a.clientX-b.left,d=a.clientY-b.top,e=c/b.width*100,g=d/b.height*100,h=f(r.city),i=h.lat-(g-50)/800,j=h.lng+(e-50)/800;isNaN(i)||isNaN(j)||s({...r,coordinates:{lat:parseFloat(i.toFixed(4)),lng:parseFloat(j.toFixed(4))}})},className:"w-full h-64 bg-gray-100 rounded-xl overflow-hidden relative border border-border cursor-crosshair group",children:[(0,b.jsx)("img",{src:"https://images.unsplash.com/photo-1524661135-423995f22d0b?q=80&w=800&auto=format&fit=crop",className:"w-full h-full object-cover opacity-60 grayscale filter mix-blend-multiply pointer-events-none select-none",alt:"Map Preview"}),(0,b.jsx)("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 transition-all duration-200 pointer-events-none",style:(()=>{if(!r?.coordinates||!r?.city)return{top:"50%",left:"50%"};let a=f(r.city),b=Number(r.coordinates.lat),c=Number(r.coordinates.lng);if(isNaN(b)||isNaN(c))return{top:"50%",left:"50%"};let d=50-(b-a.lat)*800,e=50+(c-a.lng)*800;return{top:`${Math.max(0,Math.min(100,d))}%`,left:`${Math.max(0,Math.min(100,e))}%`}})(),children:(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("div",{className:"size-8 rounded-full bg-primary border-2 border-white text-white flex items-center justify-center shadow-lg animate-bounce-short",children:(0,b.jsx)("span",{className:"material-symbols-outlined text-sm font-bold",children:"location_on"})}),(0,b.jsx)("div",{className:"w-0 h-0 border-l-[6px] border-l-transparent border-r-[6px] border-r-transparent border-t-[8px] border-t-primary mt-[-1px] filter drop-shadow-md"})]})})]}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("label",{className:"text-xs font-bold text-text-secondary",children:"Enlem (Lat)"}),(0,b.jsx)("input",{readOnly:!0,className:"w-full h-9 px-3 rounded border border-border bg-gray-100 text-xs font-mono",value:r.coordinates?.lat})]}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("label",{className:"text-xs font-bold text-text-secondary",children:"Boylam (Lng)"}),(0,b.jsx)("input",{readOnly:!0,className:"w-full h-9 px-3 rounded border border-border bg-gray-100 text-xs font-mono",value:r.coordinates?.lng})]})]}),(0,b.jsxs)("div",{className:"space-y-2 pt-4 border-t border-gray-100",children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-text-main",children:"Salon Tipi (Kategoriler)"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:j.map(a=>(0,b.jsxs)("label",{className:`cursor-pointer border px-3 py-1.5 rounded-lg text-xs font-medium transition-colors select-none ${r.typeIds?.includes(a.slug)?"bg-primary text-white border-primary":"bg-white border-border text-text-secondary hover:border-primary"}`,children:[(0,b.jsx)("input",{type:"checkbox",className:"hidden",checked:r.typeIds?.includes(a.slug),onChange:b=>{let c=r.typeIds||[],d=r.tags||[];b.target.checked?s({...r,typeIds:[...c,a.slug],tags:[...d,a.name]}):s({...r,typeIds:c.filter(b=>b!==a.slug),tags:d.filter(b=>b!==a.name)})}}),a.name]},a.id))}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-4",children:[(0,b.jsx)("input",{type:"checkbox",id:"isSponsored",className:"size-4 rounded text-primary focus:ring-primary border-gray-300",checked:r.isSponsored,onChange:a=>s({...r,isSponsored:a.target.checked})}),(0,b.jsx)("label",{htmlFor:"isSponsored",className:"text-xs font-bold text-text-main",children:"Sponsorlu (Öne Çıkar)"})]})]})]})]}),(0,b.jsxs)("div",{className:"pt-6 border-t border-gray-100 flex justify-end gap-3 sticky bottom-0 bg-white",children:[(0,b.jsx)("button",{type:"button",onClick:()=>q(!1),className:"px-6 py-2.5 rounded-lg border border-border text-text-secondary hover:bg-gray-50 font-bold transition-colors",children:"İptal"}),(0,b.jsx)("button",{type:"submit",className:"px-8 py-2.5 rounded-lg bg-primary text-white font-bold hover:bg-primary-hover shadow-lg shadow-primary/20 transition-colors",children:"Kaydet"})]})]})})]})})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=app_admin_salons_page_tsx_9cb567dc._.js.map