module.exports=[76723,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(19721),f=a.i(27508),g=a.i(56850),h=a.i(14809),i=a.i(53131),j=a.i(13411);let k=(0,e.default)(async()=>{},{loadableGenerated:{modules:[22110]},ssr:!1,loading:()=>(0,b.jsx)("div",{className:"h-full w-full flex items-center justify-center bg-gray-100",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-2"}),(0,b.jsx)("p",{className:"text-text-muted text-xs",children:"Harita yükleniyor..."})]})})});function l(){let a=(0,d.useParams)(),e=(0,d.useRouter)(),l=a.id,{user:m}=(0,i.useAuth)(),{setSalon:n,setSelectedService:o}=(0,j.useBooking)(),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)([]),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)(!0),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(0),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)(!1),F=t.reduce((a,b)=>{let c=b.category_name||"Diğer";return a[c]||(a[c]=[]),a[c].push(b),a},{}),[G,H]=(0,c.useState)(Object.keys(F).reduce((a,b)=>({...a,[b]:!0}),{}));(0,c.useEffect)(()=>{(async()=>{if(!l)return;w(!0);let[a,b,c]=await Promise.all([h.SalonDataService.getSalonById(l),h.ReviewService.getReviewsBySalon(l),h.ServiceService.getServicesBySalon(l)]);a&&(q(a),n(a)),s(b),u(c),w(!1)})()},[l,n]);let I=async a=>{if(a.preventDefault(),m&&p){if(0===z)return void alert("Lütfen bir puan seçiniz.");E(!0);try{let a=await h.ReviewService.createReview({salon_id:p.id,user_id:m.id,user_name:m.full_name,user_avatar:m.avatar_url,rating:z,comment:B});s([a,...r]),y(!1),A(0),C("");let b=await h.SalonDataService.getSalonById(p.id);b&&q(b)}catch(a){console.error("Yorum eklenirken hata oluştu",a)}finally{E(!1)}}};if(v||!p)return(0,b.jsx)(f.Layout,{children:(0,b.jsx)("div",{className:"flex h-screen items-center justify-center bg-background",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,b.jsx)("div",{className:"size-12 border-4 border-primary border-t-transparent rounded-full animate-spin"}),(0,b.jsx)("p",{className:"text-text-secondary",children:"Salon bilgileri yükleniyor..."})]})})});let J=[5,4,3,2,1].map(a=>{let b=r.filter(b=>Math.round(b.rating)===a).length,c=r.length>0?b/r.length*100:0;return{star:a,count:b,percentage:c}});return(0,b.jsxs)(f.Layout,{children:[(0,b.jsxs)("div",{className:"relative h-[400px] w-full group",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-cover bg-center transition-transform duration-1000 group-hover:scale-105",style:{backgroundImage:`url("${p.image}")`},children:(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900 via-gray-900/60 to-transparent"})}),(0,b.jsx)("div",{className:"absolute bottom-0 left-0 right-0 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-10 z-10",children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row items-end justify-between gap-6",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[p.is_sponsored&&(0,b.jsx)("span",{className:"px-3 py-1 bg-primary text-white text-xs font-bold rounded-full tracking-wide shadow-md",children:"ÖNERİLEN"}),(0,b.jsxs)("a",{href:"#reviews",className:"flex items-center gap-1.5 text-sm font-bold bg-white/20 backdrop-blur-md px-3 py-1 rounded-full text-white border border-white/20 shadow-sm hover:bg-white/30 transition-colors",children:[(0,b.jsx)("span",{className:"material-symbols-outlined text-base filled text-yellow-400",children:"star"}),p.rating||p.average_rating," ",(0,b.jsxs)("span",{className:"text-gray-300 font-normal",children:["(",r.length," Değerlendirme)"]})]})]}),(0,b.jsx)("h1",{className:"text-5xl md:text-6xl font-display font-black text-white tracking-tight leading-none drop-shadow-lg",children:p.name}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-gray-200 text-sm font-medium",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1.5 bg-black/30 px-3 py-1.5 rounded-lg border border-white/10 backdrop-blur-sm",children:[(0,b.jsx)("span",{className:"material-symbols-outlined text-primary",children:"location_on"})," ",p.address||`${p.district_name}, ${p.city_name}`]}),p.tags&&p.tags.length>0&&(0,b.jsx)("span",{className:"flex items-center gap-2",children:p.tags.map(a=>(0,b.jsxs)("span",{className:"text-gray-300 hover:text-white transition-colors cursor-pointer",children:["#",a]},a))})]})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsxs)("button",{className:"flex items-center gap-2 px-6 py-3 rounded-xl bg-white/20 hover:bg-white/30 border border-white/20 backdrop-blur-md transition-all text-white font-bold group/btn shadow-lg",children:[(0,b.jsx)("span",{className:"material-symbols-outlined text-xl group-hover/btn:scale-110 transition-transform",children:"share"})," ",(0,b.jsx)("span",{className:"hidden sm:inline",children:"Paylaş"})]}),(0,b.jsxs)("button",{className:"flex items-center gap-2 px-6 py-3 rounded-xl bg-white/20 hover:bg-white/30 border border-white/20 backdrop-blur-md transition-all text-white font-bold group/btn shadow-lg",children:[(0,b.jsx)("span",{className:"material-symbols-outlined text-xl group-hover/btn:scale-110 transition-transform",children:"favorite"})," ",(0,b.jsx)("span",{className:"hidden sm:inline",children:"Kaydet"})]})]})]})})]}),(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-12",children:[(0,b.jsxs)("div",{className:"lg:col-span-8 space-y-12",children:[(0,b.jsxs)("section",{className:"bg-white rounded-3xl p-8 border border-border shadow-card relative overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-primary/5 rounded-full blur-3xl -mr-16 -mt-16"}),(0,b.jsxs)("h3",{className:"text-2xl font-display font-bold text-text-main mb-6 flex items-center gap-3 relative z-10",children:[(0,b.jsx)("span",{className:"p-2 bg-primary/10 rounded-lg text-primary",children:(0,b.jsx)("span",{className:"material-symbols-outlined",children:"storefront"})}),"Hakkında"]}),(0,b.jsxs)("p",{className:"text-text-secondary leading-relaxed text-base relative z-10",children:[p.name,", İstanbul'un en prestijli lokasyonunda, uzman kadrosu ve modern ekipmanlarıyla hizmetinizde. Kişisel bakımınıza değer veriyor, hijyen ve konforu ön planda tutuyoruz. Siz kahvenizi yudumlarken biz de güzelliğinize güzellik katalım."]}),(0,b.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mt-8 pt-8 border-t border-gray-100",children:[{icon:"wifi",label:"Ücretsiz Wi-Fi"},{icon:"local_cafe",label:"İkramlar"},{icon:"local_parking",label:"Vale & Otopark"},{icon:"credit_card",label:"Kredi Kartı"}].map((a,c)=>(0,b.jsxs)("div",{className:"flex flex-col items-center gap-3 group",children:[(0,b.jsx)("div",{className:"size-12 rounded-2xl bg-surface-alt border border-border flex items-center justify-center text-text-muted group-hover:text-primary group-hover:border-primary/30 group-hover:bg-primary/5 transition-all duration-300",children:(0,b.jsx)("span",{className:"material-symbols-outlined text-2xl",children:a.icon})}),(0,b.jsx)("span",{className:"text-xs font-bold text-text-secondary group-hover:text-text-main transition-colors",children:a.label})]},c))})]}),(0,b.jsxs)("section",{children:[(0,b.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,b.jsxs)("h3",{className:"text-2xl font-display font-bold text-text-main flex items-center gap-3",children:[(0,b.jsx)("span",{className:"p-2 bg-primary/10 rounded-lg text-primary",children:(0,b.jsx)("span",{className:"material-symbols-outlined",children:"spa"})}),"Hizmetlerimiz"]})}),(0,b.jsx)("div",{className:"space-y-6",children:Object.entries(F).map(([a,c])=>(0,b.jsxs)("div",{className:"bg-white rounded-3xl border border-border overflow-hidden shadow-card transition-all duration-300",children:[(0,b.jsxs)("button",{onClick:()=>{H(b=>({...b,[a]:!b[a]}))},className:"w-full px-6 py-4 bg-gray-50 border-b border-border flex items-center justify-between hover:bg-gray-100 transition-colors cursor-pointer text-left",children:[(0,b.jsxs)("h4",{className:"text-lg font-bold text-text-main flex items-center gap-3",children:[(0,b.jsx)("span",{className:`w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-primary transition-transform duration-300 ${G[a]?"rotate-90":""}`,children:(0,b.jsx)("span",{className:"material-symbols-outlined text-sm",children:"chevron_right"})}),a]}),(0,b.jsxs)("span",{className:"text-xs font-bold text-text-secondary uppercase tracking-wider bg-white border border-border px-2 py-1 rounded-md",children:[c.length," Hizmet"]})]}),(0,b.jsx)("div",{className:`divide-y divide-gray-100 transition-all duration-300 ease-in-out origin-top ${G[a]?"max-h-[1000px] opacity-100":"max-h-0 opacity-0 overflow-hidden"}`,children:c.map(c=>(0,b.jsxs)("div",{className:"group p-5 hover:bg-gray-50 transition-colors flex flex-col sm:flex-row gap-4 justify-between items-center",children:[(0,b.jsxs)("div",{className:"flex items-start gap-4 w-full sm:w-auto",children:[(0,b.jsx)("div",{className:"hidden sm:flex size-14 rounded-2xl bg-surface-alt border border-border items-center justify-center text-text-muted group-hover:text-primary group-hover:border-primary/30 transition-all shrink-0",children:(0,b.jsx)("span",{className:"material-symbols-outlined text-2xl",children:"Saç"===a?"content_cut":"Bakım"===a?"face":"Tırnak"===a?"brush":"spa"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h5",{className:"text-base font-bold text-text-main group-hover:text-primary transition-colors mb-1",children:c.service_name}),(0,b.jsxs)("div",{className:"flex items-center gap-3 text-xs text-text-secondary",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1 bg-surface-alt px-2 py-0.5 rounded border border-border",children:[(0,b.jsx)("span",{className:"material-symbols-outlined text-[14px]",children:"schedule"})," ",c.duration_min," dk"]}),(0,b.jsx)("span",{children:"•"}),(0,b.jsx)("span",{children:"Uzman eşliğinde"})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 w-full sm:w-auto justify-between sm:justify-end",children:[(0,b.jsx)("div",{className:"text-right",children:(0,b.jsxs)("div",{className:"text-lg font-bold text-text-main",children:[c.price," ₺"]})}),(0,b.jsx)("button",{onClick:()=>{o(c),e.push(`/booking/${l}/staff`)},className:"h-10 px-5 bg-white text-text-main border border-border hover:bg-primary hover:text-white hover:border-primary font-bold rounded-xl transition-all flex items-center gap-2 text-sm shadow-sm active:scale-95",children:"Randevu"})]})]},c.id))})]},a))})]}),(0,b.jsx)("section",{id:"reviews",className:"scroll-mt-24",children:(0,b.jsxs)("div",{className:"bg-white rounded-3xl border border-border shadow-card overflow-hidden",children:[(0,b.jsx)("div",{className:"p-8 border-b border-border",children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"text-2xl font-display font-bold text-text-main flex items-center gap-3",children:[(0,b.jsx)("span",{className:"p-2 bg-primary/10 rounded-lg text-primary",children:(0,b.jsx)("span",{className:"material-symbols-outlined",children:"rate_review"})}),"Değerlendirmeler"]}),(0,b.jsxs)("p",{className:"text-text-secondary text-sm mt-2 ml-14",children:["Bu salon için ",r.length," gerçek müşteri yorumu."]})]}),(0,b.jsxs)("button",{onClick:()=>m?y(!x):alert("Yorum yapmak için giriş yapmalısınız."),className:"px-6 py-3 bg-primary text-white font-bold rounded-xl hover:bg-primary-hover transition-all flex items-center gap-2 shadow-sm",children:[(0,b.jsx)("span",{className:"material-symbols-outlined",children:"edit"}),"Değerlendir"]})]})}),(0,b.jsx)("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${x?"max-h-[500px] opacity-100 border-b border-border":"max-h-0 opacity-0"}`,children:(0,b.jsxs)("div",{className:"p-8 bg-gray-50",children:[(0,b.jsx)("h4",{className:"text-text-main font-bold mb-4",children:"Deneyiminizi Puanlayın"}),(0,b.jsxs)("form",{onSubmit:I,children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[[1,2,3,4,5].map(a=>(0,b.jsx)("button",{type:"button",onClick:()=>A(a),className:"p-1 focus:outline-none transition-transform hover:scale-110",children:(0,b.jsx)("span",{className:`material-symbols-outlined text-3xl ${a<=z?"filled text-yellow-500":"text-gray-300 hover:text-yellow-500"}`,children:"star"})},a)),(0,b.jsx)("span",{className:"text-text-main ml-2 font-bold",children:z>0?`${z} / 5`:""})]}),(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsx)("textarea",{value:B,onChange:a=>C(a.target.value),placeholder:"Hizmetten memnun kaldınız mı? Düşüncelerinizi yazın...",className:"w-full bg-white border border-border rounded-xl p-4 text-text-main placeholder-text-muted focus:border-primary focus:ring-1 focus:ring-primary outline-none min-h-[120px] shadow-sm",required:!0})}),(0,b.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,b.jsx)("button",{type:"button",onClick:()=>y(!1),className:"px-6 py-2.5 rounded-lg border border-border text-text-secondary hover:bg-white transition-colors font-medium bg-white shadow-sm",children:"İptal"}),(0,b.jsx)("button",{type:"submit",disabled:D||0===z,className:"px-8 py-2.5 rounded-lg bg-primary text-white font-bold hover:bg-primary-hover transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-md",children:D?"Gönderiliyor...":"Yorumu Gönder"})]})]})]})}),(0,b.jsxs)("div",{className:"p-8 grid grid-cols-1 md:grid-cols-12 gap-8 border-b border-border bg-gray-50",children:[(0,b.jsxs)("div",{className:"md:col-span-4 flex flex-col items-center justify-center text-center p-6 bg-white rounded-2xl border border-border shadow-sm",children:[(0,b.jsx)("span",{className:"text-6xl font-black text-text-main leading-none",children:p.rating||p.average_rating||0}),(0,b.jsx)("div",{className:"flex gap-1 my-3 text-yellow-400",children:[1,2,3,4,5].map(a=>(0,b.jsx)("span",{className:`material-symbols-outlined text-2xl ${a<=Math.round(p.rating||p.average_rating||0)?"filled":""}`,children:"star"},a))}),(0,b.jsxs)("span",{className:"text-text-secondary text-sm font-medium",children:[r.length," Değerlendirme"]})]}),(0,b.jsx)("div",{className:"md:col-span-8 flex flex-col justify-center gap-2",children:J.map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1 w-12 text-sm font-bold text-text-secondary",children:[a.star," ",(0,b.jsx)("span",{className:"material-symbols-outlined text-xs",children:"star"})]}),(0,b.jsx)("div",{className:"flex-1 h-3 bg-gray-200 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-yellow-400 rounded-full transition-all duration-1000 ease-out",style:{width:`${a.percentage}%`}})}),(0,b.jsx)("span",{className:"w-8 text-right text-xs text-text-secondary",children:a.count})]},a.star))})]}),(0,b.jsx)("div",{className:"divide-y divide-gray-100",children:r.length>0?r.map(a=>{let c;return(0,b.jsxs)("div",{className:"p-8 hover:bg-gray-50 transition-colors",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"size-10 rounded-full bg-cover bg-center border border-border",style:{backgroundImage:`url("${a.user_avatar||"https://i.pravatar.cc/150?u=default"}")`}}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h5",{className:"font-bold text-text-main text-sm",children:a.user_name}),(c=a.created_at??a.date)?(0,b.jsx)("span",{className:"text-xs text-text-secondary",children:new Date(c).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric"})}):null]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-0.5 bg-yellow-50 px-2 py-1 rounded text-xs font-bold text-yellow-600 border border-yellow-100",children:[a.rating," ",(0,b.jsx)("span",{className:"material-symbols-outlined text-[14px] filled",children:"star"})]})]}),(0,b.jsx)("p",{className:"text-text-secondary text-sm leading-relaxed",children:a.comment})]},a.id)}):(0,b.jsxs)("div",{className:"p-12 text-center",children:[(0,b.jsx)("div",{className:"size-16 bg-surface-alt rounded-full flex items-center justify-center mx-auto mb-4 border border-border",children:(0,b.jsx)("span",{className:"material-symbols-outlined text-3xl text-gray-400",children:"rate_review"})}),(0,b.jsx)("h5",{className:"text-text-main font-bold mb-2",children:"Henüz yorum yapılmamış"}),(0,b.jsx)("p",{className:"text-text-secondary text-sm",children:"Bu salon için ilk değerlendirmeyi siz yapın."})]})})]})})]}),(0,b.jsxs)("div",{className:"lg:col-span-4 space-y-8",children:[(0,b.jsxs)("div",{className:"bg-white rounded-3xl p-6 border border-border shadow-card",children:[(0,b.jsxs)("h4",{className:"font-bold text-text-main mb-5 flex items-center gap-2",children:[(0,b.jsx)("span",{className:"material-symbols-outlined text-primary",children:"pin_drop"})," Konum"]}),(0,b.jsxs)("div",{className:"aspect-[4/3] w-full rounded-2xl overflow-hidden mb-5 relative border border-border",children:[p.geo_latitude&&p.geo_longitude?(0,b.jsx)(k,{center:{lat:p.geo_latitude,lng:p.geo_longitude},salons:[{...p,coordinates:{lat:p.geo_latitude,lng:p.geo_longitude}}],hoveredSalonId:null,onSalonHover:()=>{}}):(0,b.jsx)("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:(0,b.jsx)("p",{className:"text-text-muted text-sm",children:"Konum bilgisi mevcut değil"})}),(0,b.jsx)("div",{className:"absolute bottom-4 left-4 right-4 z-[400]",children:(0,b.jsxs)("a",{href:`https://www.google.com/maps/search/?api=1&query=${p.geo_latitude},${p.geo_longitude}`,target:"_blank",rel:"noopener noreferrer",className:"w-full bg-white/95 hover:bg-white text-text-main py-3 rounded-xl font-bold text-sm shadow-md transition-transform hover:-translate-y-1 flex items-center justify-center gap-2 backdrop-blur-md border border-gray-100",children:[(0,b.jsx)("span",{className:"material-symbols-outlined text-lg",children:"directions"})," Yol Tarifi Al"]})})]}),(0,b.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,b.jsx)("span",{className:"material-symbols-outlined text-primary shrink-0 mt-0.5",children:"location_on"}),(0,b.jsx)("p",{className:"text-text-secondary text-sm leading-relaxed",children:p.address||`${p.district_name}, ${p.city_name}`})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-3xl p-6 border border-border shadow-card",children:[(0,b.jsxs)("h4",{className:"font-bold text-text-main mb-5 flex items-center gap-2",children:[(0,b.jsx)("span",{className:"material-symbols-outlined text-primary",children:"schedule"})," Çalışma Saatleri"]}),(0,b.jsxs)("div",{className:"space-y-4 relative",children:[(0,b.jsx)("div",{className:"absolute left-[7px] top-2 bottom-2 w-0.5 bg-gray-200"}),[{day:"Pazartesi - Cuma",hours:"09:00 - 21:00",active:!0},{day:"Cumartesi",hours:"10:00 - 20:00",active:!0},{day:"Pazar",hours:"Kapalı",active:!1}].map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-4 relative z-10",children:[(0,b.jsx)("div",{className:`size-4 rounded-full border-2 ${a.active?"bg-green-500 border-green-500 shadow-[0_0_8px_rgba(34,197,94,0.4)]":"bg-gray-200 border-gray-300"}`}),(0,b.jsxs)("div",{className:"flex-1 flex justify-between items-center text-sm p-3 rounded-xl bg-gray-50 border border-gray-100",children:[(0,b.jsx)("span",{className:"text-text-secondary",children:a.day}),(0,b.jsx)("span",{className:`font-bold ${a.active?"text-text-main":"text-red-500"}`,children:a.hours})]})]},c))]})]})]})]})}),(0,b.jsx)(g.GeminiChat,{})]})}a.s(["default",()=>l])}];

//# sourceMappingURL=app_salon_%5Bid%5D_page_tsx_bebf77ea._.js.map