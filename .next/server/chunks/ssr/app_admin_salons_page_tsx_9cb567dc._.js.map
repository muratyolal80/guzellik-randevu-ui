{"version":3,"sources":["../../../../app/admin/salons/page.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { AdminLayout } from '@/components/AdminLayout';\nimport { MasterDataService, SalonDataService } from '@/services/db';\nimport { City, District, SalonType, SalonDetail } from '@/types';\n\n// Helper: Default coordinates for major cities (fallback until we have all in DB)\nconst getCityCoordinates = (cityName: string): { lat: number; lng: number } => {\n    const defaults: Record<string, { lat: number; lng: number }> = {\n        \"Istanbul\": { lat: 41.0082, lng: 28.9784 },\n        \"Ankara\": { lat: 39.9208, lng: 32.8541 },\n        \"Izmir\": { lat: 38.4237, lng: 27.1428 },\n        \"Antalya\": { lat: 36.8969, lng: 30.7133 },\n        \"Bursa\": { lat: 40.1885, lng: 29.0610 }\n    };\n    return defaults[cityName] || defaults[\"Istanbul\"];\n};\n\n// Form data type for editing (matches the form structure, not DB structure)\ninterface SalonFormData {\n    id?: string;\n    name?: string;\n    city?: string;\n    district?: string;\n    location?: string;\n    phone?: string;\n    image?: string;\n    coordinates?: { lat: number; lng: number };\n    typeIds?: string[];\n    tags?: string[];\n    startPrice?: number;\n    isSponsored?: boolean;\n}\n\n// Adapter: Convert SalonDetail (from DB) to SalonFormData (for editing)\nconst salonDetailToFormData = (detail: SalonDetail): SalonFormData => {\n    return {\n        id: detail.id,\n        name: detail.name,\n        city: detail.city_name,\n        district: detail.district_name,\n        location: detail.address,\n        phone: detail.phone,\n        image: detail.image,\n        coordinates: {\n            lat: detail.geo_latitude || 0,\n            lng: detail.geo_longitude || 0\n        },\n        typeIds: [detail.type_slug],\n        tags: [detail.type_name],\n        startPrice: 0, // TODO: Get from salon_services\n        isSponsored: detail.is_sponsored\n    };\n};\n\nexport default function SalonManager() {\n    // State management\n    const [salons, setSalons] = useState<SalonDetail[]>([]);\n    const [cities, setCities] = useState<City[]>([]);\n    const [salonTypes, setSalonTypes] = useState<SalonType[]>([]);\n    const [districts, setDistricts] = useState<District[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [editingSalon, setEditingSalon] = useState<SalonFormData | null>(null);\n    const mapRef = useRef<HTMLDivElement>(null);\n\n    // Load initial data\n    useEffect(() => {\n        const fetchData = async () => {\n            setLoading(true);\n            const [salonsData, citiesData, typesData] = await Promise.all([\n                SalonDataService.getSalons(),\n                MasterDataService.getCities(),\n                MasterDataService.getSalonTypes()\n            ]);\n            setSalons(salonsData);\n            setCities(citiesData);\n            setSalonTypes(typesData);\n            setLoading(false);\n        };\n        fetchData();\n    }, []);\n\n    // State for Districts dependent on selected City\n    const [availableDistricts, setAvailableDistricts] = useState<string[]>([]);\n\n    useEffect(() => {\n        const loadDistricts = async () => {\n            if (editingSalon?.city) {\n                const selectedCityData = cities.find(c => c.name === editingSalon.city);\n                if (selectedCityData) {\n                    const districtsData = await MasterDataService.getDistrictsByCity(selectedCityData.id);\n                    setDistricts(districtsData);\n                    setAvailableDistricts(districtsData.map(d => d.name));\n                }\n            } else {\n                setDistricts([]);\n                setAvailableDistricts([]);\n            }\n        };\n        loadDistricts();\n    }, [editingSalon?.city, cities]);\n\n    const handleEdit = (salon: SalonDetail) => {\n        setEditingSalon(salonDetailToFormData(salon));\n        setIsModalOpen(true);\n    };\n\n    const handleCreate = () => {\n        setEditingSalon({\n            name: '',\n            location: '',\n            city: 'İstanbul',\n            district: '',\n            startPrice: 0,\n            image: 'https://images.unsplash.com/photo-1560066984-138dadb4c035?q=80&w=800&auto=format&fit=crop',\n            tags: [],\n            typeIds: [],\n            coordinates: { lat: 41.0082, lng: 28.9784 },\n            isSponsored: false\n        });\n        setIsModalOpen(true);\n    };\n\n    const handleDelete = (id: string) => {\n        if (confirm('Bu salonu silmek istediğinize emin misiniz?')) {\n            setSalons(prev => prev.filter(s => s.id !== id));\n        }\n    };\n\n    const handleSave = async (e: React.FormEvent) => {\n        e.preventDefault();\n\n        // TODO: Convert SalonFormData to database format and save via SalonDataService\n        // For now, just refresh the data\n        if (editingSalon?.id) {\n            // Update existing salon\n            alert('Salon güncelleme özelliği yakında eklenecek');\n        } else {\n            // Create new salon\n            alert('Yeni salon ekleme özelliği yakında eklenecek');\n        }\n\n        setIsModalOpen(false);\n        setEditingSalon(null);\n\n        // Refresh data\n        const salonsData = await SalonDataService.getSalons();\n        setSalons(salonsData);\n    };\n\n    // --- Geocoding & Map Logic ---\n\n    // 1. Simulate \"Get Coordinates from Address\" (Geocoding)\n    const handleGeocode = () => {\n        if (!editingSalon?.city) {\n            alert(\"Lütfen önce bir şehir seçiniz.\");\n            return;\n        }\n        const base = getCityCoordinates(editingSalon.city);\n\n        // Simulate finding specific coords for the address (random offset near city center)\n        const newLat = base.lat + (Math.random() - 0.5) * 0.05;\n        const newLng = base.lng + (Math.random() - 0.5) * 0.05;\n\n        setEditingSalon({\n            ...editingSalon,\n            coordinates: { lat: parseFloat(newLat.toFixed(4)), lng: parseFloat(newLng.toFixed(4)) }\n        });\n    };\n\n    // 2. Map Click Interaction (Drag-drop simulation)\n    const handleMapClick = (e: React.MouseEvent<HTMLDivElement>) => {\n        if (!mapRef.current || !editingSalon?.city) return;\n\n        const rect = (mapRef.current as any).getBoundingClientRect();\n        const clickX = e.clientX - rect.left; // x position within the element.\n        const clickY = e.clientY - rect.top;  // y position within the element.\n\n        // Convert pixels to percentage (0-100)\n        const xPercent = (clickX / rect.width) * 100;\n        const yPercent = (clickY / rect.height) * 100;\n\n        // Inverse Projection Logic (must match HomePage MapView projection)\n        // HomePage Logic:\n        // y = 50 - (lat - center.lat) * 800\n        // x = 50 + (lng - center.lng) * 800\n\n        const center = getCityCoordinates(editingSalon.city);\n\n        // Derived Inverse:\n        // lat = center.lat - (yPercent - 50) / 800\n        // lng = center.lng + (xPercent - 50) / 800\n\n        const newLat = center.lat - (yPercent - 50) / 800;\n        const newLng = center.lng + (xPercent - 50) / 800;\n\n        // Strictly verify numbers\n        if (isNaN(newLat) || isNaN(newLng)) return;\n\n        setEditingSalon({\n            ...editingSalon,\n            coordinates: { lat: parseFloat(newLat.toFixed(4)), lng: parseFloat(newLng.toFixed(4)) }\n        });\n    };\n\n    // Helper to position the pin on the Admin map\n    const getPinStyle = () => {\n        if (!editingSalon?.coordinates || !editingSalon?.city) return { top: '50%', left: '50%' };\n\n        // Safe defaults\n        const center = getCityCoordinates(editingSalon.city);\n        const lat = Number(editingSalon.coordinates.lat);\n        const lng = Number(editingSalon.coordinates.lng);\n\n        if (isNaN(lat) || isNaN(lng)) return { top: '50%', left: '50%' };\n\n        const y = 50 - (lat - center.lat) * 800;\n        const x = 50 + (lng - center.lng) * 800;\n\n        // Clamp to map bounds\n        return {\n            top: `${Math.max(0, Math.min(100, y))}%`,\n            left: `${Math.max(0, Math.min(100, x))}%`\n        };\n    };\n\n    return (\n        <AdminLayout>\n            <div className=\"flex justify-between items-center mb-8\">\n                <div>\n                    <h2 className=\"text-2xl font-bold text-text-main\">Salon Yönetimi</h2>\n                    <p className=\"text-text-secondary\">Sistemdeki tüm salonları düzenleyin, ekleyin veya kaldırın.</p>\n                </div>\n                <button\n                    onClick={handleCreate}\n                    className=\"px-6 py-2.5 bg-primary text-white font-bold rounded-xl hover:bg-primary-hover shadow-lg shadow-primary/20 flex items-center gap-2\"\n                >\n                    <span className=\"material-symbols-outlined\">add</span> Yeni Salon Ekle\n                </button>\n            </div>\n\n            <div className=\"bg-white rounded-2xl border border-border shadow-sm overflow-hidden\">\n                <table className=\"w-full text-left border-collapse\">\n                    <thead>\n                        <tr className=\"bg-gray-50 border-b border-gray-100 text-xs uppercase tracking-wider text-text-secondary font-semibold\">\n                            <th className=\"p-4\">Salon Adı</th>\n                            <th className=\"p-4\">Konum</th>\n                            <th className=\"p-4\">Kategori (Tür)</th>\n                            <th className=\"p-4\">Fiyat (Başlangıç)</th>\n                            <th className=\"p-4 text-right\">İşlemler</th>\n                        </tr>\n                    </thead>\n                    <tbody className=\"divide-y divide-gray-100\">\n                        {loading ? (\n                            <tr>\n                                <td colSpan={5} className=\"p-8 text-center text-text-secondary\">\n                                    <div className=\"flex items-center justify-center gap-2\">\n                                        <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-primary\"></div>\n                                        <span>Yükleniyor...</span>\n                                    </div>\n                                </td>\n                            </tr>\n                        ) : salons.length === 0 ? (\n                            <tr>\n                                <td colSpan={5} className=\"p-8 text-center text-text-secondary\">\n                                    Henüz salon eklenmemiş.\n                                </td>\n                            </tr>\n                        ) : (\n                            salons.map(salon => (\n                            <tr key={salon.id} className=\"hover:bg-gray-50 transition-colors\">\n                                <td className=\"p-4\">\n                                    <div className=\"flex items-center gap-3\">\n                                        <div className=\"size-10 rounded-lg bg-cover bg-center border border-border\" style={{backgroundImage: `url('${salon.image}')`}}></div>\n                                        <div>\n                                            <p className=\"font-bold text-text-main\">{salon.name}</p>\n                                            {salon.is_sponsored && <span className=\"text-[10px] bg-primary text-white px-1.5 py-0.5 rounded font-bold\">ÖNERİLEN</span>}\n                                        </div>\n                                    </div>\n                                </td>\n                                <td className=\"p-4 text-sm text-text-secondary\">\n                                    <div className=\"flex flex-col\">\n                                        <span>{salon.district_name}, {salon.city_name}</span>\n                                        <span className=\"text-xs text-text-muted truncate max-w-[150px]\">{salon.address}</span>\n                                    </div>\n                                </td>\n                                <td className=\"p-4\">\n                                    <div className=\"flex flex-wrap gap-1\">\n                                        {salon.type_name && (\n                                            <span className=\"text-[10px] bg-blue-50 text-blue-600 px-2 py-1 rounded-full border border-blue-100\">{salon.type_name}</span>\n                                        )}\n                                    </div>\n                                </td>\n                                <td className=\"p-4 text-sm font-bold text-text-main\">N/A ₺</td>\n                                <td className=\"p-4 text-right\">\n                                    <div className=\"flex justify-end gap-2\">\n                                        <button onClick={() => handleEdit(salon)} className=\"p-2 text-text-secondary hover:text-primary hover:bg-primary/5 rounded-lg transition-colors\"><span className=\"material-symbols-outlined text-lg\">edit</span></button>\n                                        <button onClick={() => handleDelete(salon.id)} className=\"p-2 text-text-secondary hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors\"><span className=\"material-symbols-outlined text-lg\">delete</span></button>\n                                    </div>\n                                </td>\n                            </tr>\n                        )))}\n                    </tbody>\n                </table>\n            </div>\n\n            {/* Modal */}\n            {isModalOpen && editingSalon && (\n                <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 overflow-y-auto\">\n                    <div className=\"bg-white rounded-2xl w-full max-w-4xl shadow-2xl flex flex-col max-h-[90vh]\">\n                        <div className=\"p-6 border-b border-border flex justify-between items-center bg-white z-10 shrink-0 rounded-t-2xl\">\n                            <h3 className=\"text-xl font-bold text-text-main\">{editingSalon.id ? 'Salonu Düzenle' : 'Yeni Salon Ekle'}</h3>\n                            <button onClick={() => setIsModalOpen(false)} className=\"text-text-secondary hover:text-text-main\"><span className=\"material-symbols-outlined\">close</span></button>\n                        </div>\n\n                        <div className=\"p-6 overflow-y-auto custom-scrollbar\">\n                            <form onSubmit={handleSave} className=\"space-y-6\">\n                                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n                                    {/* Left Column: Form Fields */}\n                                    <div className=\"space-y-6\">\n                                        <div>\n                                            <label className=\"block text-sm font-bold text-text-main mb-2\">Salon Adı</label>\n                                            <input required className=\"w-full h-11 px-4 rounded-lg border border-border bg-gray-50 focus:bg-white focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-colors\" value={editingSalon.name} onChange={e => setEditingSalon({...editingSalon, name: (e.target as HTMLInputElement).value})} />\n                                        </div>\n                                        <div className=\"grid grid-cols-2 gap-4\">\n                                            <div>\n                                                <label className=\"block text-sm font-bold text-text-main mb-2\">Şehir</label>\n                                                <select\n                                                    className=\"w-full h-11 px-4 rounded-lg border border-border bg-gray-50 focus:bg-white focus:border-primary focus:ring-1 focus:ring-primary outline-none\"\n                                                    value={editingSalon.city}\n                                                    onChange={e => {\n                                                        const city = (e.target as HTMLSelectElement).value;\n                                                        setEditingSalon({...editingSalon, city: city, district: ''});\n                                                    }}\n                                                >\n                                                    <option value=\"\">Seçiniz</option>\n                                                    {cities.map(c => <option key={c.id} value={c.name}>{c.name}</option>)}\n                                                </select>\n                                            </div>\n                                            <div>\n                                                <label className=\"block text-sm font-bold text-text-main mb-2\">İlçe</label>\n                                                <select\n                                                    disabled={!editingSalon.city}\n                                                    className=\"w-full h-11 px-4 rounded-lg border border-border bg-gray-50 focus:bg-white focus:border-primary focus:ring-1 focus:ring-primary outline-none disabled:opacity-50\"\n                                                    value={editingSalon.district}\n                                                    onChange={e => setEditingSalon({...editingSalon, district: (e.target as HTMLSelectElement).value})}\n                                                >\n                                                    <option value=\"\">Seçiniz</option>\n                                                    {availableDistricts.map(d => <option key={d} value={d}>{d}</option>)}\n                                                </select>\n                                            </div>\n                                        </div>\n                                        <div>\n                                            <label className=\"block text-sm font-bold text-text-main mb-2\">Açık Adres</label>\n                                            <div className=\"flex gap-2\">\n                                                <textarea required rows={3} className=\"flex-1 p-4 rounded-lg border border-border bg-gray-50 focus:bg-white focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-colors\" value={editingSalon.location} onChange={e => setEditingSalon({...editingSalon, location: (e.target as HTMLTextAreaElement).value})}></textarea>\n                                            </div>\n                                            <button\n                                                type=\"button\"\n                                                onClick={handleGeocode}\n                                                className=\"mt-2 text-xs font-bold text-primary flex items-center gap-1 hover:underline\"\n                                            >\n                                                <span className=\"material-symbols-outlined text-sm\">my_location</span>\n                                                Google Maps ile Konumu Bul\n                                            </button>\n                                        </div>\n                                        <div>\n                                            <label className=\"block text-sm font-bold text-text-main mb-2\">Başlangıç Fiyatı (₺)</label>\n                                            <input type=\"number\" required className=\"w-full h-11 px-4 rounded-lg border border-border bg-gray-50 focus:bg-white focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-colors\" value={editingSalon.startPrice} onChange={e => setEditingSalon({...editingSalon, startPrice: Number((e.target as HTMLInputElement).value)})} />\n                                        </div>\n                                        <div>\n                                            <label className=\"block text-sm font-bold text-text-main mb-2\">Görsel URL</label>\n                                            <input className=\"w-full h-11 px-4 rounded-lg border border-border bg-gray-50 focus:bg-white focus:border-primary focus:ring-1 focus:ring-primary outline-none transition-colors\" value={editingSalon.image} onChange={e => setEditingSalon({...editingSalon, image: (e.target as HTMLInputElement).value})} />\n                                        </div>\n                                    </div>\n\n                                    {/* Right Column: Map Picker */}\n                                    <div className=\"space-y-4\">\n                                        <label className=\"block text-sm font-bold text-text-main\">Harita Konumu</label>\n                                        <div className=\"text-xs text-text-secondary mb-2\">Konumu doğrulamak için harita üzerine tıklayın veya sürükleyin.</div>\n\n                                        <div\n                                            ref={mapRef}\n                                            onClick={handleMapClick}\n                                            className=\"w-full h-64 bg-gray-100 rounded-xl overflow-hidden relative border border-border cursor-crosshair group\"\n                                        >\n                                            <img\n                                                src=\"https://images.unsplash.com/photo-1524661135-423995f22d0b?q=80&w=800&auto=format&fit=crop\"\n                                                className=\"w-full h-full object-cover opacity-60 grayscale filter mix-blend-multiply pointer-events-none select-none\"\n                                                alt=\"Map Preview\"\n                                            />\n\n                                            {/* Pin */}\n                                            <div\n                                                className=\"absolute transform -translate-x-1/2 -translate-y-1/2 transition-all duration-200 pointer-events-none\"\n                                                style={getPinStyle()}\n                                            >\n                                                <div className=\"flex flex-col items-center\">\n                                                    <div className=\"size-8 rounded-full bg-primary border-2 border-white text-white flex items-center justify-center shadow-lg animate-bounce-short\">\n                                                        <span className=\"material-symbols-outlined text-sm font-bold\">location_on</span>\n                                                    </div>\n                                                    <div className=\"w-0 h-0 border-l-[6px] border-l-transparent border-r-[6px] border-r-transparent border-t-[8px] border-t-primary mt-[-1px] filter drop-shadow-md\"></div>\n                                                </div>\n                                            </div>\n                                        </div>\n\n                                        <div className=\"flex gap-4\">\n                                            <div className=\"flex-1\">\n                                                <label className=\"text-xs font-bold text-text-secondary\">Enlem (Lat)</label>\n                                                <input readOnly className=\"w-full h-9 px-3 rounded border border-border bg-gray-100 text-xs font-mono\" value={editingSalon.coordinates?.lat} />\n                                            </div>\n                                            <div className=\"flex-1\">\n                                                <label className=\"text-xs font-bold text-text-secondary\">Boylam (Lng)</label>\n                                                <input readOnly className=\"w-full h-9 px-3 rounded border border-border bg-gray-100 text-xs font-mono\" value={editingSalon.coordinates?.lng} />\n                                            </div>\n                                        </div>\n\n                                        <div className=\"space-y-2 pt-4 border-t border-gray-100\">\n                                            <label className=\"block text-sm font-bold text-text-main\">Salon Tipi (Kategoriler)</label>\n                                            <div className=\"flex flex-wrap gap-2\">\n                                                {salonTypes.map(type => (\n                                                    <label key={type.id} className={`cursor-pointer border px-3 py-1.5 rounded-lg text-xs font-medium transition-colors select-none ${editingSalon.typeIds?.includes(type.slug) ? 'bg-primary text-white border-primary' : 'bg-white border-border text-text-secondary hover:border-primary'}`}>\n                                                        <input\n                                                            type=\"checkbox\"\n                                                            className=\"hidden\"\n                                                            checked={editingSalon.typeIds?.includes(type.slug)}\n                                                            onChange={(e) => {\n                                                                // Sync tags as well for search fallback\n                                                                const typeIds = editingSalon.typeIds || [];\n                                                                const tags = editingSalon.tags || [];\n\n                                                                if ((e.target as HTMLInputElement).checked) {\n                                                                    setEditingSalon({\n                                                                        ...editingSalon,\n                                                                        typeIds: [...typeIds, type.slug],\n                                                                        tags: [...tags, type.name]\n                                                                    });\n                                                                } else {\n                                                                    setEditingSalon({\n                                                                        ...editingSalon,\n                                                                        typeIds: typeIds.filter(slug => slug !== type.slug),\n                                                                        tags: tags.filter(t => t !== type.name)\n                                                                    });\n                                                                }\n                                                            }}\n                                                        />\n                                                        {type.name}\n                                                    </label>\n                                                ))}\n                                            </div>\n                                            <div className=\"flex items-center gap-2 mt-4\">\n                                                <input\n                                                    type=\"checkbox\"\n                                                    id=\"isSponsored\"\n                                                    className=\"size-4 rounded text-primary focus:ring-primary border-gray-300\"\n                                                    checked={editingSalon.isSponsored}\n                                                    onChange={e => setEditingSalon({...editingSalon, isSponsored: (e.target as HTMLInputElement).checked})}\n                                                />\n                                                <label htmlFor=\"isSponsored\" className=\"text-xs font-bold text-text-main\">Sponsorlu (Öne Çıkar)</label>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div className=\"pt-6 border-t border-gray-100 flex justify-end gap-3 sticky bottom-0 bg-white\">\n                                    <button type=\"button\" onClick={() => setIsModalOpen(false)} className=\"px-6 py-2.5 rounded-lg border border-border text-text-secondary hover:bg-gray-50 font-bold transition-colors\">İptal</button>\n                                    <button type=\"submit\" className=\"px-8 py-2.5 rounded-lg bg-primary text-white font-bold hover:bg-primary-hover shadow-lg shadow-primary/20 transition-colors\">Kaydet</button>\n                                </div>\n                            </form>\n                        </div>\n                    </div>\n                </div>\n            )}\n        </AdminLayout>\n    );\n};\n"],"names":[],"mappings":"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"}